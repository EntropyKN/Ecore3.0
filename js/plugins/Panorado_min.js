/*
 Panorado JS - Panoramic Viewer for HTML5
(c) 2012-2016 by Karl Maloszek - Simple Software
http://www.panorado.com/en/PanoradoJs.php
Use is free on private (non-commercial) websites.
This is not public domain software!
Comments are welcome.
*/
function PanoradoJS(J){function ab(a){a&&a.alpha&&!G&&(G=new Pc);Q&&Q.paint(!0)}function nc(){
	var a;
	//a="-- Panoramic Viewer:\n"+("Version: Panorado JS v. "+f.VERSION+" (latest available: "+oc+")\n");

/*a+="Copyright: "+f.COPYRIGHT+"\n";a+="Web: "+f.HOMEPAGE+"\n";a+="License: "+(Ha?"commercial ("+Ha+")":"private use only")+"\n\n";a=a+"-- Web Browser:\n"+("Name: "+navigator.appName+"\n");a+="Platform: "+navigator.platform+"\n";a+="UserAgent: "+navigator.userAgent+"\n\n";a+="-- WebGL Graphics:\n";
a=pc()?
k?k.ctx?a+("Version: "+k.ctx.getParameter(k.ctx.VERSION)+"\nVendor: "+k.ctx.getParameter(k.ctx.VENDOR)+"\nRenderer: "+k.ctx.getParameter(k.ctx.RENDERER)+"\nShading language version: "+k.ctx.getParameter(k.ctx.SHADING_LANGUAGE_VERSION)+"\nMax. texture size: "+k.ctx.getParameter(k.ctx.MAX_TEXTURE_SIZE)+"\n\n"):a+"Drawing context not available\n\n":a+"Currently not used\n\n":a+"no\n\n";a+="-- Device Capabilities:\n";a+="Screen Resolution: "+screen.width+"/"+screen.height+"px\nDevice Pixel Ratio: "+h+
"\nTouch: "+(ra||sa?"yes":"no")+(ha?"":" (currently not used)")+"\nOrientation: "+(G?"yes":"no")+(G&&"none"!=G.usrMode?"":" (currently not used)")+"\n\n";a+="-- Video Element Support:\n";
*/

var b;if(b=document.createElement("video")){var c;c=""+Nb(b,"MP4",'video/mp4; codecs="avc1.42E01E, mp4a.40.2"');c+=Nb(b,"WebM",'video/webm; codecs="vp8, vorbis"');b=c+=Nb(b,"Ogg Vorbis",'video/ogg; codecs="theora, vorbis"')}else b="none";a=a+b+((K()?"":"(currently not used)\n")+"\n");a+="-- User Media Support:\n";
navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return a+=navigator.getMedia?"yes":"no\n"}function ob(){R();t();setTimeout(function(){
	//alert(nc())
	},1)}function Nb(a,b,c){var d="no";a&&a.canPlayType&&(d=a.canPlayType(c));d||(d="no");return b+": "+d+"\n"}function ia(){return c&&c.video?!0:!1}function K(){return c&&c.video&&c._type==f.ITYPE_VIDEOFILE?!0:!1}function Ob(){return c&&c._type==f.ITYPE_VIDEOFILE&&c.video&&!c.video.ended&&!c.video.paused?!0:
!1}function pb(){return c&&c._type==f.ITYPE_CUBEFILE?!0:!1}function pc(){var a=!1,b=document.createElement("canvas");if(b)try{if(b.getContext("webgl")||b.getContext("experimental-webgl"))a=!0}catch(c){}return a}function Pb(){K()&&(c.video.currentTime=0,c.video.play());qc(null)}function Qb(){c&&(v=c.pan,w=c.tilt,qb(),p=bb(c.scale),ja=da=cb=ta=y=u=0,ua=!1,S=L=0,W=Date.now())}function R(){Ia&&(clearTimeout(Ia),Ia=0);ja=ta=y=u=0;S=Date.now();W=0}function A(){return F==f.STATUS_LOADED}function Rb(a){ea&&
ea.length?(0>a?a=0:a>ea.length-1&&(a=ea.length-1),fa!==a&&(Sb(ea[a]),fa=a)):fa=-1}function Tb(a){Rb(fa+a)}function Sb(a){F!=f.STATUS_ERROR_LICENSE&&(a?qc(a):(va(),Ub(null)))}function Ub(a){F=f.STATUS_NOIMAGE;ia()&&(c.video.oncanplay=null,K()&&c.video.pause());c=void 0;if(a){var b=f.ITYPE_IMAGEFILE,g=null;if(a.type)switch(a.type){case "cubefile":b=f.ITYPE_CUBEFILE;break;case "videofile":b=f.ITYPE_VIDEOFILE;break;case "livestream":b=f.ITYPE_LIVESTREAM}if(b==f.ITYPE_LIVESTREAM||a.src){var d=null;c={};
switch(b){case f.ITYPE_IMAGEFILE:d=rc(a.src);g="imagefile";break;case f.ITYPE_CUBEFILE:d=rc(a.src);g="cubefile";break;case f.ITYPE_VIDEOFILE:if(d=Qc(a.src,a.loop,a.autoplay))a.src=d.video.src;g="videofile";break;case f.ITYPE_LIVESTREAM:d=Rc(),g="livestream"}c._type=b;c.type=g;c.mimeType=d.mimeType;c.img=d.img;c.video=d.video;c.src=a.src;c.title="string"==typeof a.title?a.title:"";c.description="string"==typeof a.description?a.description:"";c.userData="undefined"==typeof a.userData?null:a.userData;
c._projection=a.projection&&"spherical"==a.projection?f.PRJ_SPHERICAL:f.PRJ_FLAT;M=c._projection;c.projection="spherical"==a.projection?"spherical":"flat";c.horizon=a.horizon?ka(Number(a.horizon),-45,45):0;c.pan=a.pan?Number(a.pan):0;c.tilt=a.tilt?Number(a.tilt):0;c.scale="number"==typeof a.scale?Number(a.scale):0;b=Number(a.horzFov);c.horzFov=0<b&&360>b?b:360;c.vertFov=0;c.is360=360==c.horzFov;c.panSpeed=ia()?0:f.PANSPEED_DEF;c.tiltSpeed=0;null!=a.panSpeed&&(c.panSpeed=rb(Number(a.panSpeed)));a.tiltSpeed&&
(c.tiltSpeed=rb(Number(a.tiltSpeed)));Qa=a.compassNorth?!0:!1;c.compassNorth=a.compassNorth?Number(a.compassNorth):0;c.compassNorth+=3600;c.compassNorth%=360;c._loop=a.loop&&"true"==a.loop?!0:!1;Y=[];za=null;if(g=a.hotspots)for(b=0;b<g.length;b++)Y.push(new Sc(g[b]));c.hotspots=Y;if(Z)for(b=0;b<Z.length;b++)Z[b].clear();Z=[];aa=null;if(a=a.overlays)for(b=0;b<a.length;b++)Z.push(new Tc(a[b]));c.overlays=Z;Q.paint(!0);la();sb()}else fa=-1,t()}else fa=-1,t()}function rc(a){F=f.STATUS_LOADING;var b=new Image,
c=null;b.onload=tb;b.crossOrigin="anonymous";b.onerror=function(d){b.crossOrigin="use-credentials";b.onerror=ma;b.src=a};b.onabort=ma;a.match(/\S.jpg$/i)||a.match(/\S.jpeg$/i)||a.match(/\S.jfif$/i)?c="image/jpeg":a.match(/\S.png$/i)?c="image/png":a.match(/\S.gif$/i)&&(c="image/gif");b.src=a;return{img:b,mimeType:c}}function Qc(a,b,c){a=a.split(";");var d=null,l=null,m=document.createElement("video");if(!m)return ma(),{};for(var r=0;r<a.length;r++){if(a[r].match(/\S.mp4$/i))l="video/mp4";else if(a[r].match(/\S.webm$/i))l=
"video/webm";else if(a[r].match(/\S.ogg$/i)||a[r].match(/\S.ogv$/i))l="video/ogg";if(l&&m.canPlayType(l)){d=a[r];break}}if(!d)return ma(),{};m.oncanplay=Uc;m.crossOrigin="anonymous";m.onerror=function(a){m.crossOrigin="use-credentials";m.onerror=ma;m.src=d};m.onabort=ma;m.style.display="none";m.controls=!1;m.autoplay=!!c;m.loop=!!b;m.preload="auto";F=f.STATUS_LOADING;m.src=d;return{video:m,mimeType:l}}function Uc(a){a=a.target;a.videoWidth&&a.videoHeight?(a.width=a.videoWidth,a.height=a.videoHeight,
Q.checkPaint(),tb()):ma()}function sc(){Ob()?c.video.pause():c.video.play()}function tc(){if(K())return c.video.muted?!1:!0}function Rc(){F=f.STATUS_LOADING;var a=document.createElement("video");navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;if(!navigator.getMedia)return setTimeout(ma,1),a;navigator.getMedia({video:{mandatory:{minWidth:Vb}},audio:!1},function(b){a.oncanplay=Vc;var c=window.URL||window.webkitURL;a.src=c?c.createObjectURL(b):b;a.play()},
function(a){ma();console.log("navigator.getMedia error: "+a.name+" "+a.message)});return{video:a,mimeType:"video/livestream"}}function Vc(a){function b(){c.videoWidth&&c.videoHeight?(c.width=c.videoWidth,c.height=c.videoHeight,tb()):20>d++?setTimeout(b,200):ma()}var c=a.target,d=1;b()}function ma(a){F=f.STATUS_ERROR_IMG;va();t();Ra&&setTimeout(Ra,1)}function tb(){if(c&&!A()){F=f.STATUS_LOADED;la();uc=!1;if(ia())c.width=c.video.width,c.height=c.video.height;else if(pb()){if(!k||c.img.width!=6*c.img.height){F=
f.STATUS_ERROR_IMG;t();return}c.width=c.img.height*Math.PI;c.height=c.width/2}else c.width=c.img.width,c.height=c.img.height;pb()?(c.horzFov=360,c.vertFov=180):(c.vertFov=c.horzFov*c.height/c.width,180<c.vertFov&&(c.horzFov*=180/c.vertFov,c.vertFov=180));c.is360=360==c.horzFov;c.pan=Sa(c.pan);c.tilt=Ta(c.tilt);ub();Qb();t();Ra&&setTimeout(Ra,1)}}function qc(a){va();R();Ja(!0);c?(k&&(k.canvas.style.background="transparent"),vb=!0,sb(),vb=!1):k&&k.canvas&&(k.canvas.style.background="#000");if(e.dataUrl){H=
new Image;H.onload=function(){if(H&&(H.style.position="absolute",H.style.left=e.canvas.offsetLeft+e.canvas.clientLeft+"px",H.style.top=e.canvas.offsetTop+e.canvas.clientTop+"px",H.width=e.canvas.clientWidth,H.height=e.canvas.clientHeight,H.style.borderRadius=e.getInternalBorderRadiusStyle(),Wb=!0,a?Ub(a):(Qb(),db()),H)){var b=k&&M==f.PRJ_SPHERICAL?k.canvas:e.canvas;b.parentNode.insertBefore(H,b);H.style.zIndex=Number(b.style.zIndex)}};try{H.src=e.dataUrl,delete e.dataUrl}catch(b){va()}}else a?Ub(a):
(Qb(),db())}function va(){vb=!1;H&&Wb&&(H.parentNode&&H.parentNode.removeChild(H),H=void 0,Wb=!1);e.dataUrl&&delete e.dataUrl;L=1}function eb(a,b){vc(v+a,w+b,null)}function vc(a,b,c){W=0;R();ua=!1;A()&&("number"==typeof c&&(p=bb(c)),v=a,w=b,t())}function Ka(a){ua=!1;ba(p*a)}function ba(a){R();A()&&(0!=Ba?(cb=p,da=bb(a),da!=p&&(ja=Date.now())):(a=bb(a),p!=a&&(Xb(p,a),p=a)),t())}function qb(){La=wc(!1);Yb=wc(!0);Ua=Math.max(Zb,La);wb=Math.max($b,Ua)}function bb(a){if("number"!=typeof a)a=La;else if(0==
a)a=La;else if(-1==a)a=Yb;else if(a<Ua)a=Ua;else if(a>wb)a=wb;else for(var b=[.125,.125*Math.SQRT2,.25,.25*Math.SQRT2,.5,.5*Math.SQRT2,1,1*Math.SQRT2,2,2*Math.SQRT2,4,4*Math.SQRT2,8],c=0;c<b.length;c++)if(a>.999*b[c]&&a<1.001*b[c]){a=b[c];break}return a}function wc(a){if(!A())return 0;var b=c.width,g=c.height,d=e.canvas.width,l=e.canvas.height;if(M==f.PRJ_SPHERICAL){var m;m=Math.min(c.horzFov,f.HORZ_FOV_MAX)/2;d*=m*f.DEG_TO_RAD/Ca(m);m=Math.min(c.vertFov,f.VERT_FOV_MAX)/2;l*=m*f.DEG_TO_RAD/Ca(m);
b=Math.min(b*f.HORZ_FOV_MAX/c.horzFov,b);g=Math.min(g*f.VERT_FOV_MAX/c.vertFov,g)}b=d/b/h;g=l/g/h;return a?Math.max(b,g):Math.min(b,g)}function O(a,b,c){W=0;var d=u,f=y,m=S;R();ua=!1;A()&&(u=null===a?d:rb(a),y=null===b?f:rb(b),S=c?m:Date.now(),t())}function rb(a){return ka(a,-f.SPEED_MAX,f.SPEED_MAX)}function Sa(a){if(c.is360)a=(a+36E3)%360;else{var b=xc()/2,g=c.horzFov-b;b>g?a=c.horzFov/2:a<b?a=b:a>g&&(a=g)}return a}function Ta(a){var b=yc(),g=(c.vertFov-b)/2,d=-g,g=g-c.horizon,d=d-c.horizon;M==
f.PRJ_SPHERICAL&&c.is360&&(90<=c.vertFov/2-c.horizon&&(g+=b/2),90<=c.vertFov/2+c.horizon&&(d-=b/2));g<d?a=(d+g)/2:a<d?a=d:a>g&&(a=g);return a}function Xb(a,b){if(ua){var c=Ma(a),d=Ma(b);v+=c.x-d.x;w+=c.y-d.y}c=p;p=b;v=Sa(v);w=Ta(w);p=c;0==ja&&(ua=!1)}function Ma(a,b,g,d,l){a||(a=p);void 0==b&&(b=n.x);void 0==g&&(g=n.y);void 0==d&&(d=v);void 0==l&&(l=w);b-=e.canvas.width/2;g=-(g-e.canvas.height/2);if(M==f.PRJ_SPHERICAL){var m=c.width/c.horzFov*a*h*f.RAD_TO_DEG;a=m*ga(l)-g*wa(l);l=m*wa(l)+g*ga(l);d+=
Va(b,a);l=Va(l,na(b,a))}else d+=b/a/h*c.horzFov/c.width,l+=g/a/h*c.vertFov/c.height;c.is360&&(0>d?d+=360:360<d&&(d-=360));return new fb(d,l)}function gb(a,b){var g,d;if(M==f.PRJ_SPHERICAL){g=c.width/c.horzFov*p*h*f.RAD_TO_DEG;d=g*ga(w)-b*wa(w);var l=g*wa(w)+b*ga(w);g=Va(a,d);d=Va(l,na(a,d))}else g=a/p/h*c.horzFov/c.width,d=w+b/p/h*c.vertFov/c.height;c.is360&&(0>g?g+=360:360<g&&(g-=360));return new fb(g,d)}function xb(a,b,g){var d;d=a-v;c.is360&&(-180>=d?d+=360:180<d&&(d-=360));if(M==f.PRJ_SPHERICAL){a=
c.width/c.horzFov*p*f.RAD_TO_DEG;var l=Va(Ca(b),ga(d));b=l-w;if(-90>=b||90<b)return null;var m=a/ga(b),l=ga(l)*m;d=Ca(d)*l;b=Ca(b)*a}else b-=w,d=d/c.horzFov*c.width*p,b=b/c.vertFov*c.height*p;a=e.canvas.clientWidth/2+d;d=e.canvas.clientHeight/2-b;g&&(a*=h,d*=h);return new fb(a,d)}function xc(){var a=e.canvas.width/c.width*c.horzFov/p/h;M==f.PRJ_SPHERICAL?(a=Math.atan(a*f.DEG_TO_RAD/2)*f.RAD_TO_DEG*2,a=Math.min(a,f.HORZ_FOV_MAX)):a=Math.min(a,c.horzFov);return a}function yc(){if(!e.canvas)return 0;
var a=e.canvas.height/c.height*c.vertFov/p/h;M==f.PRJ_SPHERICAL?(a=Math.atan(a*f.DEG_TO_RAD/2)*f.RAD_TO_DEG*2,a=Math.min(a,f.VERT_FOV_MAX)):a=Math.min(a,c.vertFov);return a}function hb(){t(!0)}function t(a){var b=Wc();!a||b||c&&c.video&&(c._type==f.ITYPE_LIVESTREAM||c._type==f.ITYPE_VIDEOFILE&&!c.video.ended&&!c.video.paused)?(yb||zc||ib?setTimeout(function(){sb();db()},1):(sb(),db()),la()):db();b&&zb&&setTimeout(zb,1)}function db(){if(u||y||W||ta||ja||ia())f.REQUESTANIMATIONFRAME?Xc(hb):(Ia&&(clearTimeout(Ia),
Ia=0),Ia=window.setTimeout(hb,20))}function Wc(){if(!A())return!1;var a=S,b=v,c=w,d=p;S=Date.now();var f;f=0|Yc();f|=Zc();n.isDragging()&&Da?f=!0:(a=(S-a)/1E3,v+=u*a,w+=y*a);var m,r,e,T,a=p;0!=ja&&da!=cb&&(m=1+(S-ja)/(500*(2<<Ba)),r=Math.log(cb),e=Math.log(da),T=Math.log(p),m*=1+Math.min(2*Math.abs(r-T),Math.abs(e-T)+(e-T)*(e-T))/Math.abs(r-e)/16,cb<da?(a*=m,a>da&&(a=da)):(a/=m,a<da&&(a=da)),a==da?(p=a,ja=0):ja=S);Xb(p,a);p=a;f|=b!=v;f|=c!=w;return f|=d!=p}function Yc(){var a=1E3*ac;if(A()){if(0==
W)return va(),!1;if(S<W+a){var b=L;L=(S-W)/a;return L!=b}if(0==c.panSpeed&&0==c.tiltSpeed)return va(),W=0,!0;if(c.panSpeed!=u||c.tiltSpeed!=y){va();if(G&&G.mode!=f.ORIENTATION_NONE)u=y=0;else{a=(S-W-a-2E3)/4E3;if(0>a)return!0;u=a*c.panSpeed;y=a*c.tiltSpeed;u=0<c.panSpeed?Math.min(c.panSpeed,u):Math.max(c.panSpeed,u);y=0<c.tiltSpeed?Math.min(c.tiltSpeed,y):Math.max(c.tiltSpeed,y)}return!0}va();W=0;return!1}L=0;return!1}function Zc(){if(0==ta||ta==S)return!1;if(na(u,y)>.02/p/h*c.horzFov/90){var a=1-
(S-ta)/(25*(2<<Ab));if(0<a)return u*=a,y*=a,ta=S,!0}u=y=ta=0;return!0}function sb(){if(e.ctx){if(uc){if(F==f.STATUS_NOIMAGE)return}else if(F==f.STATUS_LOADING){oa("Loading...");return}e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height);Bb()?(k.ctx.clearColor(0,0,0,L),k.ctx.clear(k.ctx.COLOR_BUFFER_BIT)):(k&&k.ctx&&!H&&(k.ctx.clearColor(0,0,0,1),k.ctx.clear(k.ctx.COLOR_BUFFER_BIT)),e.ctx.globalAlpha=L,e.ctx.fillStyle="#000",e.ctx.fillRect(0,0,e.canvas.width,e.canvas.height));switch(F){case f.STATUS_NOIMAGE:oa("No image selected!");
break;case f.STATUS_LOADING:switch(c._type){case f.ITYPE_IMAGEFILE:case f.ITYPE_CUBEFILE:oa("Loading image\n'"+c.src+"'...");break;case f.ITYPE_VIDEOFILE:oa("Loading video\n'"+c.src+"'...");break;case f.ITYPE_LIVESTREAM:oa("Opening live stream...")}break;case f.STATUS_ERROR_IMG:switch(c._type){case f.ITYPE_IMAGEFILE:case f.ITYPE_CUBEFILE:oa("Error loading image file\n'"+c.src+"' !");break;case f.ITYPE_VIDEOFILE:oa("Error loading video file\n'"+c.src+"' !");break;case f.ITYPE_LIVESTREAM:oa("Error opening user media live stream!")}break;
case f.STATUS_ERROR_WEBGL:oa("WebGL error: Context lost!");break;case f.STATUS_ERROR_LICENSE:oa("Using Panorado JS viewer from '"+location.hostname+"' requires a valid license key!");break;case f.STATUS_LOADED:var a=e.canvas.width,b=e.canvas.height,g;e.canvas?(g=M==f.PRJ_SPHERICAL?2*Ca(Math.min(c.horzFov,f.HORZ_FOV_MAX)/2)/(c.horzFov*f.DEG_TO_RAD)*c.width*p*h:c.width*p*h,g=Math.round(Math.min(g,e.canvas.width))):g=0;var d;d=M==f.PRJ_SPHERICAL?2*Ca(Math.min(c.vertFov,f.VERT_FOV_MAX)/2)/(c.vertFov*
f.DEG_TO_RAD)*c.height*p*h:c.height*p*h;d=Math.round(Math.min(d,e.canvas.height));a=Math.round((a-g)/2);b=Math.round((b-d)/2);g=a+g;d=b+d;M==f.PRJ_SPHERICAL?Bb()?(Date.now(),k.paint(a,b,g,d)):(Date.now(),e.paintSpherical(a,b,g,d)):(Date.now(),e.paintFlat(a,b,g,d));Date.now();if(pa&&Y){e.ctx.save();e.ctx.globalAlpha=L;for(var l=0;l<Y.length;l++){var m=Y[l];m.paint();!ha&&m.isUnderCursor()&&(za=m)}e.ctx.restore()}if(Z){e.ctx.save();e.ctx.globalAlpha=L;for(l=0;l<Z.length;l++)m=Z[l],Ea?m.showSymbol():
m.hideSymbol();e.ctx.restore()}if(!k&&M==f.PRJ_SPHERICAL&&F==f.STATUS_LOADED){l=e.ctx;l.save();l.setTransform(1,0,0,1,0,0);l.globalAlpha=L;l.fillStyle="#000";var m=J.width,r=J.height;0<a&&l.fillRect(0,0,a,r);g<m&&l.fillRect(g,0,g,r);0<b&&l.fillRect(a,0,g-a,b);d<r&&l.fillRect(a,d,g-a,r-d);l.restore()}a=bc();!1!==a&&(b=e.ctx,b.save(),b.drawImage(Ac,a.x,a.y,a.cx,a.cy),b.restore());if(Qa)if(M==f.PRJ_SPHERICAL)b=e.canvas.width/2,g=(v-c.compassNorth+3600)%360,Bc(g,b);else{a=50/p*(c.horzFov/c.width);b=[1,
2,5,10,15,30,45,90];for(g=0;g<b.length;g++)if(a<=b[g]||g==b.length-1){a=b[g];break}d=v-e.canvas.width/2/p/h*c.horzFov/c.width;d-=c.compassNorth;d=Math.round(d/a)*a;for(d=d-a+c.compassNorth;(b=p*h*c.width/c.horzFov*(d-v)+e.canvas.width/2)<e.canvas.width;)g=(d-c.compassNorth+36E3)%360,Bc(Math.round(g),b),d+=a}Q.paint(!1);za&&1==L&&za.paintPopup();aa&&aa.showPopup()}if(vb)try{var Aa=Bb()?k.canvas:e.canvas;e.dataUrl=Aa.toDataURL("image/png")}catch(T){e.dataUrl=null}}}function oa(a){var b=e.canvas,c=e.ctx;
c.save();c.setTransform(h,0,0,h,0,0);c.globalAlpha=1;var d;d=""+(window.getComputedStyle(b).fontStyle+" ");d+=window.getComputedStyle(b).fontVariant+" ";d+=window.getComputedStyle(b).fontWeight+" ";d+=window.getComputedStyle(b).fontSize+" ";d+=window.getComputedStyle(b).fontFamily+" ";c.font=d;d=window.getComputedStyle(b).color;"rgb(0, 0, 0)"==d&&(d="#dd0");c.fillStyle=d;c.textBaseline="top";b=parseFloat(window.getComputedStyle(b).fontSize);a=a.split("\n");for(d=0;d<a.length;d++)c.fillText(a[d],b,
b*(1.3*d+1));c.restore()}function Bc(a,b){a=Math.round(a);var c=$c(a),d=0==a%90,l=e.ctx;l.save();l.globalAlpha=L;var m;m=(d?16:12)*h;l.font=m+"px "+f.FONTFAMILY_DEF;l.textBaseline="bottom";l.lineWidth=1.5*h;l.fillStyle=d?"#ff0":"#fff";l.shadowBlur=6*h;l.shadowColor="#000";l.beginPath();l.textBaseline="top";l.rect(b,0,1.5*h,12*h);l.stroke();l.fill();l.strokeText(c,b+5*h,1);l.fillText(c,b+5*h,1);l.restore()}function $c(a){switch(a){case 0:case 360:return"N";case 90:return"E";case 180:return"S";case 270:return"W";
default:return jb(a,3)}}function cc(){if(!pa||!Y)return null;for(var a=0;a<Y.length;a++){var b=Y[a];if(b&&b.isUnderCursor())return b}return null}function ad(a){a.imgInfo?(E.imgInfo=new Image,E.imgInfo.onload=function(){t()},E.imgInfo.onerror=function(){E.imgInfo=Wa(!1)},E.imgInfo.src=a.imgInfo):E.imgInfo=Wa(!1);a.imgLink?(E.imgLink=new Image,E.imgLink.onload=function(){t()},E.imgLink.onerror=function(){E.imgLink=Wa(!0)},E.imgLink.src=a.imgLink):E.imgLink=Wa(!0);E.border=!0===a.border;E.shadow=!0===
a.shadow;E.opacity="number"==typeof a.opacity?a.opacity:1;E.opacity=ka(E.opacity,0,1);if(Y)for(a=0;a<Y.length;a++)Y[a].checkTemplate();t()}function Wa(a){var b=document.createElement("canvas"),c=b.width=b.height=96,d=b.getContext("2d");d.setTransform(1,0,0,1,48,48);d.beginPath();d.arc(0,0,.46*c,0,2*Math.PI,!1);c=d.createRadialGradient(-c/8,-c/3,0,0,0,c/2);c.addColorStop(0,"#f66");c.addColorStop(1,"#d00");d.fillStyle=c;d.shadowOffsetX=.5;d.shadowOffsetY=1;d.shadowBlur=6;d.shadowColor="#000";d.fill();
d.lineWidth=7;d.strokeStyle=d.fillStyle="#fff";d.lineCap="round";d.lineJoin="round";a?(d.beginPath(),d.moveTo(-15,-15),d.lineTo(15,0),d.lineTo(-15,15)):(d.beginPath(),d.moveTo(-12,-4),d.lineTo(0,-4),d.lineTo(0,20),d.moveTo(-14,20),d.lineTo(14,20),d.stroke(),d.beginPath(),d.arc(-2,-20,2.5,0,2*Math.PI,!1));d.stroke();return b}function Na(a){var b=.2*Math.log(10*p)*h,b=Math.max(b,.25),b=Math.min(b,2);a||(b/=h);return b}function bd(){var a=document.createElement("div"),b=a.style;b.margin="0";b.padding=
"0";b.pointerEvents="none";b.background="transparent";b.border="none";b.borderRadius=e.getInternalBorderRadiusStyle();b.overflow="hidden";b.zIndex=e.canvas.style.zIndex;b.position="absolute";dc(b);a.id=e.canvas.id+"_overlays";e.canvas.parentNode.insertBefore(a,e.canvas.nextSibling);return a}function Ja(a){aa&&(a||"auto"==aa.popupClose)&&(aa.hidePopup(),aa=null)}function cd(a){a.symbolSrc?(B.symbol=new Image,B.symbol.onload=function(){t()},B.symbol.onerror=function(){B.symbol=ec()},B.symbol.src=a.symbolSrc):
B.symbolSrc=ec();B.symbolScaling=Cb(a.symbolScaling);!1===B.symbolScaling&&(B.symbolScaling=f.OV_SCALE_LOGARITHMIC);B.symbolPerspective=!!a.symbolPerspective;B.popupScaling=Cb(a.popupScaling);!1===B.popupScaling&&(B.popupScaling=f.OV_SCALE_LOGARITHMIC);B.popupPerspective=!!a.popupPerspective;B.popupCenter="center"==a.popupPosition;B.popupClose="button"==a.popupClose;if(Z)for(a=0;a<Z.length;a++)Z[a].checkTemplate();aa&&aa.hidePopup();t()}function Cb(a){switch(a){case "fixed":return f.OV_SCALE_FIXED;
case "logarithmic":return f.OV_SCALE_LOGARITHMIC;case "linear":return f.OV_SCALE_LINEAR;default:return!1}}function Cc(a){switch(a){case f.OV_SCALE_FIXED:return"fixed";case f.OV_SCALE_LOGARITHMIC:return"logarithmic";case f.OV_SCALE_LINEAR:return"linear";default:return!1}}function ec(){var a=document.createElement("canvas");a.width=a.height=96;var b=a.getContext("2d");b.setTransform(1,0,0,1,48,48);b.beginPath();b.moveTo(-38,-30);b.lineTo(38,-30);b.lineTo(38,21);b.lineTo(19,21);b.lineTo(-2,36);b.lineTo(-2,
21);b.lineTo(-38,21);b.closePath();b.lineWidth=14;b.lineCap="round";b.lineJoin="round";b.strokeStyle="#e00";b.shadowOffsetX=.5;b.shadowOffsetY=1;b.shadowBlur=6;b.shadowColor="#444";b.stroke();b.shadowOffsetX=0;b.shadowOffsetY=0;b.shadowBlur=0;b.fillStyle="#fff";b.fill();b.lineWidth=7;b.strokeStyle="#000";b.beginPath();b.moveTo(-16,6);b.lineTo(-16,7);b.stroke();b.beginPath();b.moveTo(-2,6);b.lineTo(-2,7);b.stroke();b.beginPath();b.moveTo(12,6);b.lineTo(12,7);b.stroke();a=a.toDataURL("image/png");b=
new Image;b.src=a;return b}function dd(){var a=document.createElement("div"),b=a.style;b.visibility="hidden";b.pointerEvents="auto";b.zIndex=V.style.zIndex+1;b.position="absolute";b.left="0";b.top="0";a.id=e.canvas.id+"_popup_frame";V.appendChild(a);return a}function ed(){var a=document.createElement("canvas"),b=a.width=a.height=96,c=a.getContext("2d");c.fillStyle="rgba(226, 0, 0, 1)";c.fillRect(0,0,b,b);c.shadowOffsetX=.5;c.shadowOffsetY=1;c.shadowBlur=6;c.shadowColor="#000";c.beginPath();c.moveTo(20,
20);c.lineTo(76,76);c.moveTo(76,20);c.lineTo(20,76);c.lineWidth=14;c.lineCap="round";c.lineJoin="round";c.strokeStyle="#fff";c.stroke();b=a.toDataURL("image/png");a=new Image;a.src=b;b=a.style;b.position="absolute";b.left="auto";b.top="0";b.right="0";b.width="24px";b.height="24px";b.visibility="hidden";b.pointerEvents="auto";b.borderRadius="2px";b.boxShadow="none";b.zIndex=9999;a.id=e.canvas.id+"_popup_button";a.ondragstart=function(a){N(a)};return a}function bc(){if(Ha)return!1;var a=80*h,b=25*h;
return new Db(e.canvas.width-1.05*a,e.canvas.height-1.2*b,a,b)}function fc(){k&&(k.clearBuffers(),k.canvas.parentNode&&k.canvas.parentNode.removeChild(k.canvas),k=new gc,k.canvas&&k.ctx||(k=null),kb())}function Bb(){return!(!k||M!=f.PRJ_SPHERICAL||F!=f.STATUS_LOADED)}function ub(){Bb()?k.setBuffers():k&&k.clearBuffers()}function Fa(a){e.canvas&&a&&(e.canvas.style.cursor="url("+a+"),move",e.canvas.width=e.canvas.width)}function la(){if(e.canvas&&ha)e.canvas.style.cursor="auto";else{var a,b=n.isDragging();
if(F==f.STATUS_NOIMAGE||F==f.STATUS_ERROR_IMG)a="auto";else if(F==f.STATUS_LOADING)a="wait";else if(qa){var c;if(c=!b)c=(c=bc())?Eb(c):!1;c?a="pointer":(a=cc())&&a.isLink()?a="pointer":(a=Da?b?Fb:Gb:b?Hb:Ib,a=(a?"url("+a+"),":"")+"move")}else a="auto";e.canvas.style.cursor=a}}function Dc(a){R();Ja(!0);e.canvas.removeEventListener("touchstart",Xa,!1);document.removeEventListener("touchend",Ya,!1);document.removeEventListener("touchmove",Za,!1);e.canvas.removeEventListener("pointerdown",Xa,!1);document.removeEventListener("pointerup",
Ya,!1);document.removeEventListener("pointermove",Za,!1);e.canvas.removeEventListener("mousedown",Xa,!1);document.removeEventListener("mouseup",Ya,!1);document.removeEventListener("mouseleave",Ec,!1);document.removeEventListener("mousemove",Za,!1);e.canvas.removeEventListener("wheel",Fc,!1);(ha=a&&(ra||sa))?ra?(e.canvas.addEventListener("touchstart",Xa,!1),document.addEventListener("touchend",Ya,!1),document.addEventListener("touchmove",Za,!1)):sa&&(e.canvas.addEventListener("pointerdown",Xa,!1),
document.addEventListener("pointerup",Ya,!1),document.addEventListener("pointermove",Za,!1)):(e.canvas.addEventListener("mousedown",Xa,!1),document.addEventListener("mouseup",Ya,!1),document.addEventListener("mouseleave",Ec,!1),document.addEventListener("mousemove",Za,!1),e.canvas.addEventListener("wheel",Fc,!1));t()}function N(a){a.cancelable&&a.preventDefault();a.stopPropagation()}function Eb(a){return!a||n.x<a.x||n.x>a.x+a.cx||n.y<a.y||n.y>a.y+a.cy?!1:!0}function fd(a){Q.checkPaint()}function Gc(a){t()}
function gd(a){if(qa&&A()&&!n.isDragging()){switch(a.which){case 37:case 177:a.shiftKey?O(u-f.SPEED_DIFF,null):(O(0,0),eb(-1/Math.sqrt(p),0));break;case 39:case 176:a.shiftKey?O(u+f.SPEED_DIFF,null):(O(0,0),eb(1/Math.sqrt(p),0));break;case 38:a.shiftKey?O(null,y+f.SPEED_DIFF):(O(0,0),eb(0,1/Math.sqrt(p)));break;case 40:a.shiftKey?O(null,y-f.SPEED_DIFF):(O(0,0),eb(0,-1/Math.sqrt(p)));break;case 13:lb&&Jb(!0);break;case 27:(u||y)&&O(0,0);lb&&Oa&&Jb(!1);break;case 178:O(0,0);break;case 179:K()?sc():
Pb();break;case 107:case 187:case 175:a.ctrlKey||(a.shiftKey?Ka(f.ZOOM_STEP2):Ka(f.ZOOM_STEP1));break;case 109:case 189:case 174:a.ctrlKey||(a.shiftKey?Ka(1/f.ZOOM_STEP2):Ka(1/f.ZOOM_STEP1));break;case 49:case 97:ba(1);break;case 50:case 98:ba(2);break;case 53:case 101:ba(.5);break;case 65:ba(-1);break;case 77:Da=!Da;la();break;case 67:Qa=!Qa;t();break;case 72:pa=!pa;Ea=!Ea;t();break;case 73:ob();break;default:return}N(a)}}function Xa(a){qa&&A()&&(a.which&&1!=a.which?n.clear():a.shiftKey||a.ctrlKey||
a.altKey?n.clear():a.target!=e.canvas?n.clear():(n.onEvent(a),N(a),document.activeElement!=e.canvas&&e.canvas.focus(),hc(),Ja(!1),ja=W=0,L=1,R(),t()))}function Ya(a){3==a.which&&a.target==e.canvas&&window.setTimeout(ob,1);if(qa&&A())if(a.which&&1!=a.which)n.clear();else{var b=n.time,c=n.isPinchZooming();n.onEvent(a);if(c&&!n.isPinchZooming())n.clearPinchZoom();else if(n.isDragging()){N(a);a=(ha?12:2)*h;if(c=n.getDragDist()<=a){var d=za,l=d?d.ts:null,m=cc();m&&(m.ts=Date.now());za=m;if(d||m)if(ha){if(d&&
d.isLink()&&(d.isPopupUnderCursor()||d==m&&l+1E3>m.ts)){n.clear();d.gotoUrl();u=y=0;t();return}}else{if(m&&m.isLink()&&m.isUnderCursor()){n.clear();m.gotoUrl();u=y=0;return}}else d=bc(),Eb(d)&&(d=self.open(f.HOMEPAGE,"_blank"))&&d.focus();t()}Da&&(b=Math.max((Date.now()-b-100)/-100,0),u*=b,y*=b);0==Ab||0==u&&0==y?u=y=0:ta=Date.now();n.time=Date.now();xa&&clearTimeout(xa);c&&(mb||nb)&&(xa?(xa=0,nb&&na(n.x-Hc,n.y-Ic)<a&&setTimeout(nb,1)):(Hc=n.xDown,Ic=n.yDown,xa=setTimeout(function(){xa=0;mb&&mb()},
500)));n.clear();la()}else n.clear()}}function Ec(a){n.isDragging()&&(a.target==e.canvas&&"IFRAME"==a.relatedTarget.tagName?(n.clear(),R()):a.target==document&&window.top!=window.self&&(n.clear(),R()))}function Za(a){if(qa&&A())if(a.which&&1!=a.which)n.clear();else{var b=Date.now(),g=n.x,d=n.y,l=b-n.time;n.onEvent(a);if(n.isPinchZooming())N(a),hc(),g=n.startScale,b=n.getPinchScale(),g=Ma(g,n.xDown,n.yDown),d=Ma(b,n.x,n.y),v=n.startPan+g.x-d.x,w=n.startTilt+g.y-d.y,p=b,v=Sa(v),w=Ta(w),hb();else if(n.isDragging()){N(a);
hc();if(xa){clearTimeout(xa);xa=0;return}b=c.horzFov/c.width/p/h;if(Da){var m=Ma(n.startScale,n.xDown,n.yDown,n.startPan,n.startTilt),r,Aa=p;r=m.x;var T=m.y,m=n.x-e.canvas.width/2,X=-(n.y-e.canvas.height/2);if(M==f.PRJ_SPHERICAL){var C=c.width/c.horzFov*Aa*h*f.RAD_TO_DEG,Aa=na(C,X),X=Va(X,C),D=na(m,Aa),C=wa(T)*D,T=ga(T)*D,T=Math.asin(m/T)*f.RAD_TO_DEG;isNaN(T)&&(T=0<m?90:-90);r-=T;m=Math.acos(C/Aa)*f.RAD_TO_DEG;isNaN(m)&&(m=0<C?0:180);m=90-m-X}else r-=m/Aa/h*c.horzFov/c.width,m=T-X/Aa/h*c.vertFov/
c.height;r=new fb(r,m);v=Sa(r.x);w=Ta(r.y);u/=b;y/=b;u/=2;y/=2;10>l&&(l=10);u+=(g-n.x)/l*500;y-=(d-n.y)/l*500;u*=b;y*=b}else g=n.getDragDistX(),d=n.getDragDistY(),u=g*Math.max(Math.abs(g),100)*f.MOUSE_SPEED*b,y=-d*Math.max(Math.abs(d),100)*f.MOUSE_SPEED*b;hb()}else a.target==e.canvas&&(ha?la():(b=cc(),b!=za&&(za=b,t())));a.target==e.canvas&&Q.checkPaint();aa&&aa.showPopup();Kb&&setTimeout(Kb,1)}}function Fc(a){if(qa&&A()&&!(ic||n.isDragging()||a.ctrlKey||a.altKey||a.mozInputSource&&a.mozInputSource==
a.MOZ_SOURCE_TOUCH||null!=a.wheelDelta&&1E4<Math.abs(a.wheelDelta))){var b=a.shiftKey?f.ZOOM_STEP2:f.ZOOM_STEP1;e.canvas.focus();n.onEvent(a);if(a.deltaY){var c=0>a.deltaY;jc&&(c=!c);var d=0==ja?p:da,b=d*(c?b:1/b);0==Ba&&Xb(d,b);W=0;R();ua=!0;ba(b);N(a);Q.checkPaint()}}}function hc(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function Jc(a){if(qa&&A()&&G){G.newEvent(a);var b=G.pan;a=G.tilt;switch(G.mode){case f.ORIENTATION_ABSOLUTE:if(n.isDragging()||
n.isPinchZooming())break;b+=c.compassNorth;b%=360;R();v=Sa(b);w=Ta(a);t();break;case f.ORIENTATION_RELATIVE:case f.ORIENTATION_RELATIVE_INV:a+=60,b=3<b?b-3:-3>b?b+3:0,a=3<a?a-3:-3>a?a+3:0,G.mode==f.ORIENTATION_RELATIVE_INV&&(b*=-1,a*=-1),b=-b*Math.abs(b)*.5,a=-a*Math.abs(a)*.5,W=0,O(b,a,!0)}}}function Kc(a){console.log("Panorado JS: Compass needs calibration!");N(a)}function hd(a){a.preventDefault();console.log("Panorado JS: WebGL context lost - trying to restore WebGL!");F=f.STATUS_ERROR_WEBGL;t()}
function id(a){console.log("Panorado JS: WebGL context restored!");fc();tb()}function kb(){(h=window.devicePixelRatio)||(h=1);Oa?kc(window.innerWidth,window.innerHeight):kc(e.canvas.clientWidth,e.canvas.clientHeight)}function kc(a,b){va();e.canvas.width=a*h;e.canvas.height=b*h;e.canvas.style.width=a+"px";e.canvas.style.height=b+"px";if(e.canvas&&k&&k.canvas){var c=k.canvas.style;c.zIndex=e.canvas.style.zIndex;c.position="absolute";c.left=e.canvas.offsetLeft+e.canvas.clientLeft+"px";c.top=e.canvas.offsetTop+
e.canvas.clientTop+"px";c.width=a+"px";c.height=b+"px";c.borderRadius=e.getInternalBorderRadiusStyle();k.canvas.width=e.canvas.width;k.canvas.height=e.canvas.height;k.canvas.parentNode!=e.canvas.parentNode&&(k.canvas.parentNode.removeChild(k.canvas),e.canvas.parentNode.insertBefore(k.canvas,e.canvas))}lc(a,b);Q.resize(a,b);c=Ba;Ba=0;var d;d=p==La?0:p==Yb?-1:p;qb();ba(d);Ba=c;hb()}function lc(a,b){V.style.zIndex=e.canvas.style.zIndex;a||(a=e.canvas.clientWidth);b||(b=e.canvas.clientHeight);var c=V.style;
c.left=e.canvas.offsetLeft+e.canvas.clientLeft+"px";c.top=e.canvas.offsetTop+e.canvas.clientTop+"px";c.width=a+"px";c.height=b+"px"}function Jb(a){e.canvas&&a!=Oa&&(k&&k.canvas&&(k.canvas.style.visibility="hidden"),(Oa=a)?(document.documentElement.oldOverflow=window.getComputedStyle(document.documentElement).overflow,document.documentElement.style.overflow="hidden",document.body.oldOverflow=window.getComputedStyle(document.body).overflow,document.body.style.overflow="hidden",a=e.canvas.style,e.canvas.oldStyleText=
e.canvas.style.cssText,a.position="absolute",a.left="0",a.top="0",a.margin="0",a.width=window.innerWidth+"px",a.height=window.innerHeight+"px",a.border="none",a.borderRadius="0",document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.scrollLeft=0,document.body.scrollTop=0,e.canvas.parentNode!=document.body&&(_placeholderExtract(e.canvas,document.body),Q.resize(),document.body.insertBefore(Q.div,e.canvas.nextSibling),lc(),document.body.insertBefore(V,e.canvas.nextSibling))):
(a=e.canvas.placeholder.parentNode,_placeholderRestore(e.canvas),Q.resize(),a.insertBefore(Q.div,e.canvas.nextSibling),lc(),a.insertBefore(V,e.canvas.nextSibling),e.canvas.oldStyleText&&(e.canvas.style.cssText=e.canvas.oldStyleText,delete e.canvas.oldStyleText),document.body.style.overflow=document.body.oldOverflow,delete document.body.oldOverflow,document.documentElement.style.overflow=document.documentElement.oldOverflow,delete document.documentElement.oldOverflow),kb())}function jb(a,b){for(var c=
"",d=Math.pow(10,b-1);a<d&&1<d;)c+="0",d/=10;return c+a}function jd(a){function b(a,b){return a.xDisp>=b.x&&a.xDisp<=b.x+b.cx&&a.yDisp>=b.y&&a.yDisp<=b.y+b.cy}this.arGrid=this.gridSize=this.dataUrl=this.ctx=this.canvas=null;this.useTriangles=yb||zc;if((this.canvas=a)&&this.canvas.getContext&&(this.ctx=a.getContext("2d"))){this.canvas.setAttribute("tabindex",0);this.canvas.setAttribute("hidefocus",!0);var f=this.canvas.style;f.outline="none";if(!Number(f.zIndex)||0>f.zIndex)f.zIndex=0;f.position="relative";
f.boxSizing="content-box";f.background="transparent";dc(f);ib&&a.offsetParent==document.body&&(document.body.style.margin="0");document.documentElement.style.margin="0";document.documentElement.style.border="none";this.canvas.addEventListener("keydown",gd);this.canvas.addEventListener("MSGestureTap",N);this.canvas.addEventListener("MSGestureHold",N);this.canvas.addEventListener("MSGestureStart",N);this.canvas.addEventListener("MSGestureChange",N);this.canvas.addEventListener("MSGestureEnd",N);this.canvas.addEventListener("MSGestureInertiaStart",
N);this.canvas.addEventListener("MSHoldVisual",N);this.canvas.addEventListener("gesturestart",N);this.canvas.addEventListener("gesturechange",N);this.canvas.addEventListener("gestureend",N);this.canvas.addEventListener("contextmenu",N);this.canvas.addEventListener("focus",fd);this.canvas.addEventListener("blur",Gc);window.addEventListener("blur",Gc);window.addEventListener("resize",kb);this.provide2dGrid=function(){this.gridSize=Lb;this.useTriangles||(this.gridSize*=.5);this.gridSize*=Math.min(4/
Math.min(c.width/c.horzFov*p*h,4),2);this.gridSize=c.horzFov/Math.floor(c.horzFov/this.gridSize);var a=Math.round(c.horzFov/this.gridSize);c.is360&&(this.gridSize=c.horzFov/a);var b=Math.round(c.vertFov/this.gridSize);180>c.vertFov&&b++;a++;b++;this.arGrid&&this.arGrid.length==b||(this.arGrid=Array(b));for(var m,r,f=Math.max(-c.vertFov/2-c.horizon,-90),e=Math.min(c.vertFov/2-c.horizon,90),g=0;g<b;g++){this.arGrid[g]&&this.arGrid[g].length==a||(this.arGrid[g]=Array(a));r=c.vertFov/2-c.horizon-g*this.gridSize;
r>e?r=e:r<f&&(r=f);for(var C=0;C<a;C++)m=C*this.gridSize,this.arGrid[g][C]=new kd(m,r)}};this.update2dGrid=function(a,b,m,r){for(var f=this.arGrid.length,e=this.arGrid[0].length,g=0;g<f;g++)for(var h=0;h<e;h++){var D=this.arGrid[g][h];D.valid=!1;if(!(D.tilt<m||D.tilt>r)){if(c.is360&&a>=b){if(D.pan<a&&D.pan>b)continue}else{if(D.pan<a)continue;if(D.pan>b)continue}var p=xb(D.pan,D.tilt,!0);p&&(D.valid=!0,D.xDisp=p.x,D.yDisp=p.y)}}};this.paintFlat=function(a,b,m,r){var f=this.ctx,e=ia()?c.video:c.img;
f.globalAlpha=L;f.setTransform(1,0,0,1,0,0);var g=c.width,C=c.height,D=Math.min((m-a)/p/h,g),k=Math.min((r-b)/p/h,C),q=v/c.horzFov*g-D/2,C=(.5-(w+c.horizon)/c.vertFov)*C-k/2,D=q+D,k=C+k;0>q&&(c.is360?(q+=g,D+=g):q=0);0>C&&(C=0);if(ld||md)q=Math.floor(q),C=Math.floor(C);if(D<=g)f.drawImage(e,q,C,D-q,k-C,a,b,m-a,r-b);else{var n=(g-q)*p*h;ib&&(n=(n+.5).toFixed(0));f.drawImage(e,q,C,g-q,k-C,a,b,n,r-b);f.drawImage(e,0,C,D-g,k-C,a+n,b,m-a-n,r-b)}};this.paintSpherical=function(a,f,m,r){this.ctx.globalAlpha=
L;a=m-a;var e=r-f;this.provide2dGrid();m=gb(0,0);f=gb(0,e/2);r=gb(a/2,e/2);var g=gb(a/2,-e/2),e=gb(0,-e/2);90<Math.abs(f.x-e.x)?0<m.y?(a=c.horzFov/2,m=Math.min(e.y,g.y),r=90):(a=c.horzFov/2,m=-90,r=Math.max(f.y,r.y)):(a=Math.max(r.x,g.x),m=Math.min(e.y,g.y),r=Math.max(f.y,r.y),a+=this.gridSize);f=-a;a+=v;f+=v;c.is360&&(f=(f+3600)%360,a=(a+3600)%360);-90<m&&(m-=this.gridSize);90>r&&(r+=this.gridSize);this.update2dGrid(f,a,m,r);f=this.arGrid.length-1;r=this.arGrid[0].length-1;a=this.gridSize/c.horzFov*
c.width*p*h;m=this.gridSize/c.vertFov*c.height*p*h;a=new Db(-a,-m,this.canvas.width+2*a,this.canvas.height+2*m);for(m=0;m<f;m++)for(g=0;g<r;g++)if(e=this.arGrid[m][g],e.valid){var X=this.arGrid[m][g+1];if(X.valid){var C=this.arGrid[m+1][g+1];if(C.valid){var k=this.arGrid[m+1][g];if(k.valid&&(b(e,a)||b(X,a)||b(C,a)||b(k,a))){var n=e.pan/c.horzFov*c.width,q=X.pan/c.horzFov*c.width;q==c.width&&q--;this.paintTile(n,(.5-(e.tilt+c.horizon)/c.vertFov)*c.height,q,(.5-(k.tilt+c.horizon)/c.vertFov)*c.height,
e.xDisp,e.yDisp,X.xDisp,X.yDisp,C.xDisp,C.yDisp,k.xDisp,k.yDisp,0<e.tilt+c.horizon)}}}}};this.paintTile=function(a,b,c,r,f,e,g,h,k,p,q,n,t){this.useTriangles?(this.paintTri(a,b,c,b,c,r,f,e,g,h,k,p,!0),this.paintTri(a,b,c,r,a,r,f,e,k,p,q,n,!1)):t?this.paintTri(a,b,c,r,a,r,f,e,k,p,q,n,!0):this.paintTri(a,b,c,b,c,r,f,e,g,h,k,p,!1)};this.paintTri=function(a,b,f,r,e,g,X,k,n,t,q,u,y){var z=this.ctx,U=a,x=b,ya=f-a,P=g-b,I;f-=a;r-=b;e-=a;g-=b;a=b=0;n-=X;t-=k;q-=X;u-=k;var ca=e*r-f*g,w=(q*r-n*g)/ca,v=(u*r-
t*g)/ca;n=(n*e-q*f)/ca;t=(t*e-u*f)/ca;z.save();z.setTransform(w,v,n,t,X,k);this.useTriangles&&(z.beginPath(),I=1==L?1:0,y?(z.moveTo(a-2*I,b-I),z.lineTo(f+I,r-I),z.lineTo(e+I,g+2*I)):(z.moveTo(a-I,b-2*I),z.lineTo(f+2*I,r+I),z.lineTo(e-I,g+I)),z.closePath(),z.clip());try{var B=ia()?c.video:c.img;I=1==L?10/p/h/this.gridSize:0;ya=Math.min(ya+I,c.width-U);P=Math.min(P+I,c.height-x);z.drawImage(B,U,x,ya,P,0,0,ya,P)}catch(E){}z.restore()};this.getInternalBorderRadiusStyle=function(){var a=this.canvas.style,
b=a.borderRadius;if(!b||!b.match(/^\d+px$/))return"";a=a.borderWidth;return a.match(/^\d+px$/)?(b=parseFloat(b)-parseFloat(a))?b+"px":"":""}}}function gc(){function a(a,b){var c=a.getParameter(a.MAX_TEXTURE_SIZE),c=Math.min(c,8192),f=b.width/b.height,e,k;e=!1;b.width>c||b.height>c?e=!0:ia()?e=!0:g(b.width)&&g(b.height)||(e=!0);if(!e)return b.widthUsed=b.width,b.heightUsed=b.height,b;1<=f?(e=Math.min(b.width,c),k=e/f):(k=Math.min(b.height,c),e=k*f);l.width=d(e);l.height=d(k);f=l.getContext("2d");if(!f)return null;
for(var h=e/b.width,p=0;p<b.height;p+=c)for(var q=Math.min(c,b.height-p),n=0;n<b.width;n+=c){var t=Math.min(c,b.width-n);try{f.drawImage(b,n,p,t,q,n*h-0,p*h-0,t*h+0,q*h+0)}catch(u){return null}}l.widthUsed=e;l.heightUsed=k;return l}function b(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log(a.getShaderInfoLog(b)),F=f.STATUS_ERROR_WEBGL,null)}function g(a){return 0==(a&a-1)}function d(a){--a;for(var b=1;32>b;b<<=1)a|=a>>
b;return a+1}this.ctx=this.canvas=null;var l=document.createElement("canvas");this.shAlpha=this.shMVMatrix=this.shTextureCoord=this.shVertexPos=this.shaderProg=null;this.numVertices=0;this.mvMatrix=this.texture=null;this.initShaders=function(){var a=this.ctx,c=b(a,a.VERTEX_SHADER,"attribute vec3 aVertexPos;\nattribute vec2 aTextureCoord;\nuniform mat4 uMvMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void) {\ngl_Position = uMvMatrix * vec4(aVertexPos, 1.0);\nvTextureCoord = aTextureCoord;\n}"),f=
b(a,a.FRAGMENT_SHADER,"precision lowp float;\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvoid main(void) {\nvec4 textureColor = texture2D(uSampler, vTextureCoord);\ngl_FragColor = vec4(textureColor.rgb, uAlpha);\n}");this.shaderProg=a.createProgram();a.attachShader(this.shaderProg,c);a.attachShader(this.shaderProg,f);a.linkProgram(this.shaderProg);a.getProgramParameter(this.shaderProg,a.LINK_STATUS)?(a.validateProgram(this.shaderProg),a.getProgramParameter(this.shaderProg,
a.VALIDATE_STATUS)?(this.shMVMatrix=a.getUniformLocation(this.shaderProg,"uMvMatrix"),this.shAlpha=a.getUniformLocation(this.shaderProg,"uAlpha"),this.shVertexPos=a.getAttribLocation(this.shaderProg,"aVertexPos"),a.enableVertexAttribArray(this.shVertexPos),this.shTextureCoord=a.getAttribLocation(this.shaderProg,"aTextureCoord"),a.enableVertexAttribArray(this.shTextureCoord),a.useProgram(this.shaderProg)):console.log(a.getShaderInfoLog(this.shaderProg))):console.log(a.getShaderInfoLog(this.shaderProg))};
if(this.canvas=document.createElement("canvas")){try{this.ctx=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(m){}this.ctx?(this.canvas.addEventListener("webglcontextlost",hd,!1),this.canvas.addEventListener("webglcontextrestored",id,!1),this.canvas.style.background="transparent",this.canvas.style.border="none",this.canvas.style.borderRadius=e.getInternalBorderRadiusStyle(),e.canvas.parentNode.insertBefore(this.canvas,e.canvas),this.initShaders(),this.ctx.blendFunc(this.ctx.SRC_ALPHA,
this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.enable(this.ctx.BLEND),this.clearBuffers=function(){var a=this.ctx;a&&a.bindTexture(a.TEXTURE_2D,null);delete this.texture},this.setBuffers=function(){pb()?this.setCubeBuffers():this.setSphereBuffers()},this.setSphereBuffers=function(){var b=ia()?c.video:c.img,d=this.ctx;delete this.texture;if(b=a(d,b)){var e=1/c.horzFov*b.widthUsed/b.width,g=1/c.vertFov*b.heightUsed/b.height,l=b.width!=b.widthUsed,k=[],h=0,p=0,n=0,t=0,u=c.horzFov,n=Math.max(-c.vertFov/2-c.horizon,
-90),z=Math.min(c.vertFov/2-c.horizon,90),U,x,ya=Lb;85<=c.vertFov/2+Math.abs(c.horizon)||(ya*=2);p=n;n=0;for(x=!1;!x;p+=ya,n++){p>=z&&(p=z,x=!0);var P=wa(p),I=ga(p),ca=(z-p)*g,t=h=0;for(U=!1;!U;h+=ya,t++){h>=u&&(h=u,U=!0);var y=wa(h),w=ga(h),v=h*e;U&&l&&c.is360&&(v-=5E-4);k.push(new nd(v,ca,y*I,P,-w*I))}}e=[];g=[];l=null;for(u=this.numVertices=0;u<n-1;u++){l=k[u*t];e.push(l.x);e.push(l.y);e.push(l.z);g.push(0);g.push(0);this.numVertices++;for(z=0;z<t;z++)l=k[u*t+z],e.push(l.x),e.push(l.y),e.push(l.z),
g.push(l.xSrc),g.push(l.ySrc),l=k[(u+1)*t+z],e.push(l.x),e.push(l.y),e.push(l.z),g.push(l.xSrc),g.push(l.ySrc),this.numVertices+=2;e.push(l.x);e.push(l.y);e.push(l.z);g.push(0);g.push(0);this.numVertices++}d.bindBuffer(d.ARRAY_BUFFER,d.createBuffer());d.bufferData(d.ARRAY_BUFFER,new Float32Array(e),d.STATIC_DRAW);d.vertexAttribPointer(this.shVertexPos,3,d.FLOAT,!1,0,0);d.bindBuffer(d.ARRAY_BUFFER,d.createBuffer());d.bufferData(d.ARRAY_BUFFER,new Float32Array(g),d.STATIC_DRAW);d.vertexAttribPointer(this.shTextureCoord,
2,d.FLOAT,!1,0,0);this.texture=d.createTexture();d.bindTexture(d.TEXTURE_2D,this.texture);try{d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b),b.width=b.height=0}catch(B){d.bindTexture(d.TEXTURE_2D,null);F=f.STATUS_ERROR_IMG;fc();return}d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);if(!(.5>=Ua)||85<=c.vertFov/2+Math.abs(c.horizon)||ia())d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);else try{d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_NEAREST),
d.generateMipmap(d.TEXTURE_2D)}catch(B){d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR)}d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE)}else F=f.STATUS_ERROR_IMG},this.setCubeBuffers=function(){var b=ia()?c.video:c.img,d=this.ctx;delete this.texture;if(b=a(d,b)){var e=b.widthUsed/b.width/6,g=b.heightUsed/b.height,l=1/b.width,h=.8/b.height,e=[0,0,0,g-h,1*e,0,1*e,g-h,2*e,0,2*e,g-h,3*e,0,3*e,g-h,4*e-l,0,4*e-l,g-
h,4*e-l,g-h,4*e+l,0,4*e+l,0,4*e+l,g-h,5*e-l,0,5*e-l,g-h,5*e-l,g-h,5*e+l,0,5*e+l,0,5*e+l,g-h,6*e-l,0,6*e-l,g-h];this.numVertices=22;d.bindBuffer(d.ARRAY_BUFFER,d.createBuffer());d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,-1,-1,1,1,-1,1,-1,-1,1,1,1,1,-1,1,-1,1,1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,1,1,-1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,-1,1]),d.STATIC_DRAW);d.vertexAttribPointer(this.shVertexPos,3,d.FLOAT,!1,0,0);d.bindBuffer(d.ARRAY_BUFFER,d.createBuffer());
d.bufferData(d.ARRAY_BUFFER,new Float32Array(e),d.STATIC_DRAW);d.vertexAttribPointer(this.shTextureCoord,2,d.FLOAT,!1,0,0);this.texture=d.createTexture();d.bindTexture(d.TEXTURE_2D,this.texture);try{d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b)}catch(k){d.bindTexture(d.TEXTURE_2D,null);F=f.STATUS_ERROR_IMG;fc();return}d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);try{d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR_MIPMAP_NEAREST),d.generateMipmap(d.TEXTURE_2D)}catch(k){d.texParameteri(d.TEXTURE_2D,
d.TEXTURE_MIN_FILTER,d.LINEAR)}d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE)}else F=f.STATUS_ERROR_IMG},this.paint=function(b,d,f,e){this.canvas.style.visibility="visible";var g=this.ctx;if(!g.isContextLost()){if(ia()){var l=a(g,c.video);g.bindTexture(g.TEXTURE_2D,this.texture);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,l)}f-=b;e-=d;this.ctx.viewport(b,d,f,e);this.setMvMatrix(f,e);g.uniformMatrix4fv(this.shMVMatrix,
!1,this.mvMatrix);g.uniform1f(this.shAlpha,L);g.drawArrays(g.TRIANGLE_STRIP,0,this.numVertices);k.ctx.flush();k.ctx.finish()}},this.setMvMatrix=function(a,b){var d=na(a/c.width*c.horzFov/p/h,b/c.height*c.vertFov/p/h),e;e=a/b;var d=.1*Ca(Math.atan(d*f.DEG_TO_RAD/2)*f.RAD_TO_DEG*2/2)/Math.sqrt(1+e*e),g=1/1.9;e=[.1/(d*e),0,0,0,0,.1/d,0,0,0,0,-2.1*g,-1,0,0,-.4*g,0];var g=v,d=ga(g),g=wa(g),d=[d,0,-g,0,0,1,0,0,g,0,d,0,0,0,0,1],l=-w,g=ga(l),l=wa(l);this.mvMatrix=Lc(Lc(d,[1,0,0,0,0,g,l,0,0,-l,g,0,0,0,0,1]),
e)}):delete this.canvas}}function od(){this.xDown=this.yDown=this.xDown1=this.yDown1=this.xDown2=this.yDown2=this.x=this.y=this.x1=this.y1=this.x2=this.y2=null;this.time=this.startPan=this.startTilt=this.startScale=0;this.clear=function(){this.xDown=this.yDown=this.xDown1=this.yDown1=this.xDown2=this.yDown2=this.x1=this.y1=this.x2=this.y2=null;this.time=this.startPan=this.startTilt=this.startScale=0};this.clearPinchZoom=function(){this.xDown1=this.yDown1=this.xDown2=this.yDown2=this.x1=this.y1=this.x2=
this.y2=null;this.startPan=v;this.startTilt=w;this.startScale=p;this.xDown=this.x;this.yDown=this.y};this.onEvent=function(a){var b,c=e.canvas,d=window.getComputedStyle(c);b=parseFloat(d.borderLeftWidth);for(d=parseFloat(d.borderTopWidth);c;c=c.offsetParent)b+=c.offsetLeft,d+=c.offsetTop;b=new fb(b,d);switch(a.type){case "mousedown":this.clear();this.startPan=v;this.startTilt=w;this.startScale=p;this.x=this.xDown=(a.pageX-b.x)*h;this.y=this.yDown=(a.pageY-b.y)*h;break;case "mouseup":case "mouseleave":this.x=
(a.pageX-b.x)*h;this.y=(a.pageY-b.y)*h;break;case "mousemove":this.x=(a.pageX-b.x)*h;this.y=(a.pageY-b.y)*h;break;case "touchstart":this.clear();this.startPan=v;this.startTilt=w;this.startScale=p;1==a.touches.length?(this.x=this.xDown=(a.changedTouches[0].pageX-b.x)*h,this.y=this.yDown=(a.changedTouches[0].pageY-b.y)*h):2==a.touches.length&&(this.x1=this.xDown1=(a.touches[0].pageX-b.x)*h,this.y1=this.yDown1=(a.touches[0].pageY-b.y)*h,this.x2=this.xDown2=(a.touches[1].pageX-b.x)*h,this.y2=this.yDown2=
(a.touches[1].pageY-b.y)*h,this.x=this.xDown=(this.x1+this.x2)/2,this.y=this.yDown=(this.y1+this.y2)/2);break;case "touchend":if(1==a.touches.length){this.x=this.xDown=(a.touches[0].pageX-b.x)*h;this.y=this.yDown=(a.touches[0].pageY-b.y)*h;this.xDown1=null;break}case "touchmove":1==a.touches.length?(this.x=(a.changedTouches[0].pageX-b.x)*h,this.y=(a.changedTouches[0].pageY-b.y)*h,this.xDown1=this.yDown1=this.xDown2=this.yDown2=this.x1=this.y1=this.x2=this.y2=null):2==a.touches.length&&(a.touches[1].target==
e.canvas?(this.x1=(a.touches[0].pageX-b.x)*h,this.y1=(a.touches[0].pageY-b.y)*h,this.x2=(a.touches[1].pageX-b.x)*h,this.y2=(a.touches[1].pageY-b.y)*h,this.x=(this.x1+this.x2)/2,this.y=(this.y1+this.y2)/2):(this.x=(a.changedTouches[0].pageX-b.x)*h,this.y=(a.changedTouches[0].pageY-b.y)*h));break;case "pointerdown":a.isPrimary?(this.clear(),this.startPan=v,this.startTilt=w,this.startScale=p,this.x1=this.xDown1=(a.pageX-b.x)*h,this.y1=this.yDown1=(a.pageY-b.y)*h,this.x=this.xDown=this.x1,this.y=this.yDown=
this.y1):(this.startPan=v,this.startTilt=w,this.startScale=p,this.x2=this.xDown2=(a.pageX-b.x)*h,this.y2=this.yDown2=(a.pageY-b.y)*h,this.x=this.xDown=(this.x1+this.x2)/2,this.y=this.yDown=(this.y1+this.y2)/2);break;case "pointerup":if(this.isPinchZooming()){a.isPrimary?(this.xDown=this.x=this.x2,this.yDown=this.y=this.y2):(this.xDown=this.x=this.x1,this.yDown=this.y=this.y1);this.xDown1=null;break}case "pointermove":a.isPrimary?(this.x1=(a.pageX-b.x)*h,this.y1=(a.pageY-b.y)*h,this.x=null===this.x2?
this.x1:(this.x1+this.x2)/2,this.y=null===this.y2?this.y1:(this.y1+this.y2)/2):(this.x2=(a.pageX-b.x)*h,this.y2=(a.pageY-b.y)*h,this.x=(this.x1+this.x2)/2,this.y=(this.y1+this.y2)/2)}this.time=Date.now()};this.isDragging=function(){return null!==this.xDown};this.getDragDistX=function(){return null===this.x||null===this.xDown?0:this.x-this.xDown};this.getDragDistY=function(){return null===this.y||null===this.yDown?0:this.y-this.yDown};this.getDragDist=function(){var a=this.getDragDistX(),b=this.getDragDistY();
return na(a,b)};this.isPinchZooming=function(){return null!==this.xDown1&&null!=this.xDown2};this.getPinchScale=function(){var a=1;if(this.startScale&&null!==this.x1&&null!==this.y1&&null!==this.x2&&null!==this.y2&&null!==this.xDown1&&null!==this.yDown1&&null!==this.xDown2&&null!==this.yDown2){var b=this.x2-this.x1,c=this.y2-this.y1,d=na(b,c),b=this.xDown2-this.xDown1,c=this.yDown2-this.yDown1,b=na(b,c);d/b&&(a=d/b)}return bb(this.startScale*a)}}function Sc(a){function b(){if(!pa)return null;var a=
xb(l,m,!0);if(!a)return null;var b=Na(!0),c=q&&q.src?q.width:f.HS_DEFSIZE,c=c*b,d=q&&q.src?q.height:f.HS_DEFSIZE,d=d*b;a.x-=c/2;a.y-=d/2;return 0>a.x+c||a.x>e.canvas.width||0>a.y+d||a.y>e.canvas.height?null:new Db(a.x,a.y,c,d)}function c(){if(!h)return null;var a=b();if(!a)return null;e.ctx.save();e.ctx.font=f.HS_FONTSIZE+"px "+f.FONTFAMILY_DEF;for(var d=h.split("<br>"),g=0,P=0,g=0;g<d.length;g++){var m=e.ctx.measureText(d[g]);m.width>P&&(P=m.width)}e.ctx.restore();a=new Db(a.x+1.2*a.cx,a.y+a.cy/
10,P+.8*f.HS_FONTSIZE,(g+.5)*f.HS_FONTSIZE);d=4*Na(!0);0>a.x?a.x=0:a.x>e.canvas.width-a.cx*d&&(a.x=e.canvas.width-a.cx*d);0>a.y?a.y=0:a.y>e.canvas.height-a.cy*d&&(a.y=e.canvas.height-a.cy*d);return a}function d(){return k?!0:!1}this.checkTemplate=function(){n||(q=d()?E.imgLink:E.imgInfo);u||(v=E.border);D||(w=E.shadow);y||(z=E.opacity)};this.isUnderCursor=function(){var a=b();return a?Eb(a):!1};this.isPopupUnderCursor=function(){var a=c();if(!a)return!1;var b=4*Na(!0);a.cx*=b;a.cy*=b;return Eb(a)};
this.gotoUrl=function(){if(k)if("javascript:"==k.substr(0,11).toLowerCase())eval(k.substr(11));else if("_self"==p)window.location.href=k;else{var a=self.open(k,p);a&&a.focus()}};this.isLink=d;this.paint=function(){var a=b();if(a&&q){e.ctx.globalAlpha=L;try{e.ctx.drawImage(q,a.x,a.y,a.cx,a.cy)}catch(c){}}};this.paintPopup=function(){var a=e.ctx;a.save();a.globalAlpha=L*z;w&&(a.shadowColor="#444",a.shadowBlur=40*Na(!0),a.shadowOffsetX=1,a.shadowOffsetY=1);a.font=f.HS_FONTSIZE+"px "+f.FONTFAMILY_DEF;
var b=c();if(b){a.strokeStyle=v?"#008":"transparent";a.lineWidth=v?.5:0;var d=4*Na(!0);a.setTransform(d,0,0,d,b.x,b.y);d=e.ctx.createLinearGradient(0,0,0,b.cy);d.addColorStop(0,"#fff");d.addColorStop(1,"#ccc");a.fillStyle=d;b.x=b.y=0;a.beginPath();a.rect(b.x,b.y,b.cx,b.cy);a.fill();a.stroke();a.shadowBlur=0;a.shadowOffsetX=0;a.shadowOffsetY=0;a.fillStyle="#008";a.textAlign="left";a.textBaseline="middle";b=h.split("<br>");for(d=0;d<b.length;d++)a.fillText(b[d],.4*f.HS_FONTSIZE,f.HS_FONTSIZE*(d+.8))}a.restore()};
var l=a.pan?Number(a.pan):0,m=a.tilt?Number(a.tilt):0,h="string"==typeof a.text?a.text:null,k="string"==typeof a.url?a.url:null,p="string"==typeof a.target?a.target:"_self",n=!1,u=!1,D=!1,y=!1;Object.defineProperty(this,"pan",{set:function(a){l=a;t()},get:function(){return l}});Object.defineProperty(this,"tilt",{set:function(a){m=a;t()},get:function(){return m}});Object.defineProperty(this,"text",{set:function(a){h=a},get:function(){return h}});Object.defineProperty(this,"url",{set:function(a){k=
a},get:function(){return k}});Object.defineProperty(this,"target",{set:function(a){p=a},get:function(){return p}});Object.defineProperty(this,"img",{get:function(){return q?q.src:null}});var q;a.img&&"string"==typeof a.img?(q=new Image,q.src=a.img,n=!0):q=d()?E.imgLink:E.imgInfo;h&&d()&&(h+="  >>");var v=E.border,w=E.shadow,z=E.opacity;"boolean"==typeof a.border&&(v=a.border,u=!0);"boolean"==typeof a.shadow&&(w=a.shadow,D=!0);"number"==typeof a.opacity&&(z=a.opacity,y=!0);z=ka(z,0,1)}function Tc(a){function b(){var a=
q;if(a){var b=a.style;b.visibility="hidden";b.zIndex=V.style.zIndex;b.position="absolute";b.left="0";b.top="0";b.pointerEvents="auto";b.boxSizing="border-box";b.margin=0;U&&(b.cursor="pointer");a.title=F?F:"";a.onclick=function(a){Ja(!0);x?(aa=C,u=y=0,T()):U&&(aa=C,E())};Mc(a)}}function g(a){G=Cb(a);!1===G?(G=B.symbolScaling,J=!1):J=!0}function d(a){z=a;void 0===z?(z=B.symbolPerspective,K=!1):K=!0}function l(a){H=Cb(a);!1===H?(H=B.popupScaling,M=!1):M=!0}function m(a){P=a;void 0===P?(P=B.popupPerspective,
O=!1):O=!0}function h(a){Q=!0;switch(a){case "auto":I=!1;break;case "center":I=!0;break;default:I=B.popupCenter,Q=!1}}function k(a){S=!0;switch(a){case "auto":ca=!1;break;case "button":ca=!0;break;default:ca=B.popupClose,S=!1}}function T(){if(x){var a=$a.style,b=xb(D,A,!1);if(b){$a.appendChild(x);var d="visible"==a.visibility,g=1;switch(H){case f.OV_SCALE_LOGARITHMIC:g=2.17*Na(!1);break;case f.OV_SCALE_LINEAR:g=p}var m=yb?"-ms-transform":"transform",l=m+"-origin",h;if(P){h=(e.canvas.clientWidth-x.offsetWidth)/
2;var b=(e.canvas.clientHeight-x.offsetHeight)/2,k=c.width/c.horzFov*p*f.RAD_TO_DEG;V.style.perspective=k+"px";a[l]="50% 50% "+k+"px";a[m]="translate("+h+"px,"+b+"px) rotateX("+w+"deg) rotateY("+(v-D)+"deg) rotateX("+-A+"deg) scale("+g+")"}else I?(b.x-=x.offsetWidth*g/2,b.y-=x.offsetHeight*g/2):(b.y-=x.offsetHeight*g,l=e.canvas.clientWidth-x.offsetWidth*g,0>b.x?b.x=0:b.x>l&&(b.x=l),l=e.canvas.clientHeight-x.offsetHeight*g,0>b.y?b.y=0:b.y>l&&(b.y=l)),h=b.x+x.offsetWidth*(g-1)/2,b=b.y+x.offsetHeight*
(g-1)/2,a[m]="matrix("+g+",0,0,"+g+","+h+","+b+")";x.style.visibility="visible";a.visibility="visible";ca&&!d&&(mc.style.visibility="visible",$a.appendChild(mc),mc.onclick=function(a){Ja(!0)})}else a.visibility="hidden"}}function E(){if(U)if("javascript:"==U.substr(0,11).toLowerCase())eval(U.substr(11));else{var a=self.open(U,"_blank");a&&a.focus()}}this.showPopup=T;this.hidePopup=function(){$a.style.visibility="hidden";for(var a;a=$a.lastChild;)$a.removeChild(a)};this.checkTemplate=function(){if(!Mb){var a=
q;q=B.symbol.cloneNode(!0);b();V.replaceChild(q,a)}J||(G=B.symbolScaling);K||(z=B.symbolPerspective);M||(H=B.popupScaling);O||(P=B.popupPerspective);Q||(I=B.popupCenter);S||(ca=B.popupClose)};this.showSymbol=function(){if(q){var a=q.style,b=xb(D,A,!1);if(b){var d=1;switch(G){case f.OV_SCALE_LOGARITHMIC:d=Na(!1);break;case f.OV_SCALE_LINEAR:d=p}var P=yb?"-ms-transform":"transform",g;if(z){g=(e.canvas.clientWidth-q.offsetWidth)/2;var b=(e.canvas.clientHeight-q.offsetHeight)/2,m=c.width/c.horzFov*p*
f.RAD_TO_DEG;V.style.perspective=m+"px";a[P+"-origin"]="50% 50% "+m+"px";a[P]="translate("+g+"px,"+b+"px) rotateX("+w+"deg) rotateY("+(v-D)+"deg) rotateX("+-A+"deg) scale("+d+") "}else g=b.x-q.offsetWidth/2,b=b.y-q.offsetHeight/2,a[P]="matrix("+d+",0,0,"+d+", "+g+","+b+")";a.opacity=L;a.visibility="visible"}else a.visibility="hidden"}};this.hideSymbol=function(){q&&(q.style.visibility="hidden")};this.clear=function(){q&&(q.style.visibility="hidden",_placeholderRestore(q));x&&(x.style.visibility="hidden",
_placeholderRestore(x))};Object.defineProperty(this,"pan",{set:function(a){D=a;t()},get:function(){return D}});Object.defineProperty(this,"tilt",{set:function(a){A=a;t()},get:function(){return A}});Object.defineProperty(this,"symbolElement",{set:function(a){q=a},get:function(){return q}});Object.defineProperty(this,"symbolElementId",{set:function(a){q=document.getElementById(a)},get:function(){return q.getAttribute("id")}});Object.defineProperty(this,"symbolSrc",{get:function(){return q?q.src:null}});
Object.defineProperty(this,"symbolHref",{set:function(a){U=a;q&&(q.style.cursor=U?"pointer":"auto")},get:function(){return U}});Object.defineProperty(this,"symbolScaling",{set:g,get:function(){return Cc(G)}});Object.defineProperty(this,"symbolPerspective",{set:d,get:function(){return z}});Object.defineProperty(this,"popupElement",{set:function(a){x=a},get:function(){return x}});Object.defineProperty(this,"popupElementId",{set:function(a){x=document.getElementById(a)},get:function(){return x.getAttribute("id")}});
Object.defineProperty(this,"popupScaling",{set:l,get:function(){return Cc(H)}});Object.defineProperty(this,"popupPerspective",{set:m,get:function(){return P}});Object.defineProperty(this,"popupPosition",{set:h,get:function(){return I?"center":"auto"}});Object.defineProperty(this,"popupClose",{set:k,get:function(){return ca?"button":"auto"}});var C=this,D=a.pan?Number(a.pan):0,A=a.tilt?Number(a.tilt):0,q=null,F=null,G=f.OV_SCALE_LOGARITHMIC,z=!1,U=null,x=null,H=f.OV_SCALE_LOGARITHMIC,P=!1,I=!1,ca=
!1,Mb=!1,J=!1,K=!1,M=!1,O=!1,Q=!1,S=!1;a.symbolTitle&&"string"==typeof a.symbolTitle&&(F=a.symbolTitle);a.symbolElement&&"object"==typeof a.symbolElement?(q=a.symbolElement,_placeholderExtract(q,V),Mb=!0):a.symbolElementId&&"string"==typeof a.symbolElementId?(q=document.getElementById(a.symbolElementId),_placeholderExtract(q,V),Mb=!0):a.symbolSrc&&"string"==typeof a.symbolSrc?(q=new Image,q.src=a.symbolSrc,V.appendChild(q),Mb=!0):(q=B.symbol.cloneNode(!0),V.appendChild(q));a.symbolHref&&"string"==
typeof a.symbolHref?U=a.symbolHref:a.popupElement&&"object"==typeof a.popupElement?(x=a.popupElement,_placeholderExtract(x,V)):a.popupElementId&&"string"==typeof a.popupElementId&&(x=document.getElementById(a.popupElementId),_placeholderExtract(x,V));b();(function(){var a=x;if(a){var b=a.style;b.visibility="hidden";b.boxSizing="border-box";b.margin=0;a.ondragstart=function(a){N(a)};a.ontouchenter=a.onpointerenter=a.onmouseenter=function(a){n.isDragging()&&(n.clear(),R())}}})();g(a.symbolScaling);
d(a.symbolPerspective);l(a.popupScaling);m(a.popupPerspective);h(a.popupPosition);k(a.popupClose)}function pd(){function a(a){var b=document.createElement("canvas");b.setAttribute("id",a.id);b.setAttribute("name",a.name);b.fnVisible=a.fnVisible;b.fnPaint=a.fnPaint;b.fnClick=a.fnClick;b.fnHilight=a.fnHilight;b.fnEnabled=a.fnEnabled;b.xFactor=a.xFactor?a.xFactor:1;"function"===typeof b.fnClick&&(b.onclick=function(a){g();qa&&(b.fnEnabled&&!b.fnEnabled()||window.setTimeout(function(){b.fnClick(a)},1))});
b.onmousemove=function(a){g()};Mc(b);a=b.style;a.position="relative";a.pointerEvents="auto";a.boxSizing="border-box";a.cursor="auto";x.appendChild(b)}function b(a){if(!m)d(!1);else if(a||"visible"==x.style.visibility){a=x.childNodes;for(var b=0;b<a.length;b++){var c=a[b];if(c.fnVisible&&c.fnVisible()){c.style.display="inline-block";c.width=c.clientWidth*h;c.height=c.clientHeight*h;var e=c.getContext("2d");e.strokeStyle="#fff";var g=h*(ha?1.25:1)*l,k=!c.fnEnabled||c.fnEnabled();e.setTransform(g,0,
0,g,c.width/2,c.height/2);c.fnHilight&&c.fnHilight()?e.fillStyle="rgba(64, 85, 127, 1.0)":e.fillStyle="rgba(12, 16, 24, 0.5)";e.strokeStyle=k?"#fff":"#aaa";e.beginPath();g=f.CTRL_CX*c.xFactor;k=f.CTRL_CY*c.xFactor;e.rect(-g/2,-k/2,g,k);e.fill();e.lineWidth=2;c.fnPaint(e)}else c.style.display="none"}}}function g(){clearTimeout(H);m?("visible"!=x.style.visibility&&b(!0),d(!0),H=setTimeout(function(){d(!1)},3E3)):d(!1)}function d(a){var b=x.style;a?(b.transition="opacity 0.1s",b.visibility="visible",
b.opacity="1"):(b.transition="visibility 0s 0.6s, opacity 0.5s linear",b.visibility="hidden",b.opacity="0")}this.paint=b;this.checkPaint=g;this.resize=function(a,b){var c=h*(ha?1.25:1)*l/h;a||(a=e.canvas.clientWidth);b||(b=e.canvas.clientHeight);var d=x.style;d.zIndex=x.style.zIndex;d.left=e.canvas.offsetLeft+e.canvas.clientLeft+"px";d.top=e.canvas.offsetTop+e.canvas.clientTop+"px";d.width=a+"px";d.height=b+"px";d.margin="0";d.padding="0";d.paddingLeft=f.CTRL_CX*c*.3+"px";d.paddingTop=e.canvas.clientHeight-
f.CTRL_CY*c*1.2+"px";for(var g=x.childNodes,m=f.CTRL_CX*c*.07+"px",k=f.CTRL_CX*c*.3+"px",p=0;p<g.length;p++){var n=g[p],d=n.style;d.margin="0";d.padding="0";d.marginRight=n.nextSibling&&n.nextSibling.getAttribute("name")==n.getAttribute("name")?m:k;d.width=f.CTRL_CX*c*n.xFactor+"px";d.height=f.CTRL_CY*c+"px"}};var l=1;Object.defineProperty(this,"size",{set:function(a){l=ka(a,.7,2);Q.resize()},get:function(){return l}});var m=!0,k=!0,n=!0,v=!(ra||sa),w=!(ra||sa),C=!0,D=!0,B=!0,q=!0,A="",E=!0,z=null,
F=!0,x=null,H=null;Object.defineProperty(this,"div",{get:function(){return x}});Object.defineProperty(this,"visible",{set:function(a){m=!!a;b(!0)},get:function(){return m}});Object.defineProperty(this,"reset",{set:function(a){k=!!a;b(!0)},get:function(){return k}});Object.defineProperty(this,"video",{set:function(a){n=!!a;b(!0)},get:function(){return n}});Object.defineProperty(this,"scale",{set:function(a){v=!!a;b(!0)},get:function(){return v}});Object.defineProperty(this,"motion",{set:function(a){w=
!!a;b(!0)},get:function(){return w}});Object.defineProperty(this,"browse",{set:function(a){C=!!a;b(!0)},get:function(){return C}});Object.defineProperty(this,"hotspots",{set:function(a){D=!!a;b(!0)},get:function(){return D}});Object.defineProperty(this,"orientation",{set:function(a){B=!!a;b(!0)},get:function(){return B}});Object.defineProperty(this,"fullWindow",{set:function(a){q=!!a;b(!0)},get:function(){return q}});Object.defineProperty(this,"helpUrl",{set:function(a){A=a;b(!0)},get:function(){return A}});
Object.defineProperty(this,"info",{set:function(a){E=!!a;b(!0)},get:function(){return E}});Object.defineProperty(this,"closeWindow",{set:function(a){F=!!a;b(!0)},get:function(){return F}});(function(){x=document.createElement("div");var a=x.style;a.pointerEvents="none";a.background="transparent";a.border="none";a.borderRadius=e.getInternalBorderRadiusStyle();a.overflow="hidden";a.zIndex=e.canvas.style.zIndex;a.position="absolute";a.whiteSpace="nowrap";a.boxSizing="border-box";a.display="block";a.visibility=
"hidden";a.opacity="0";a.transition="display 0s 2s, opacity 2s linear";dc(a);x.id=e.canvas.id+"_controls";e.canvas.parentNode.insertBefore(x,e.canvas.nextSibling.nextSibling)})();(function(){a({id:"reset",name:"reset",fnVisible:function(){return k},fnPaint:function(a){a.beginPath();a.moveTo(-4,-4);a.lineTo(4,0);a.lineTo(-4,4);a.closePath();a.stroke()},fnClick:function(a){Pb()}});a({id:"video_pause",name:"video",fnVisible:function(){return n&&K()},fnPaint:function(a){a.lineWidth=1.2;a.beginPath();
a.arc(0,0,7,0,2*Math.PI,!0);a.stroke();a.lineWidth=2;Ob()?(a.beginPath(),a.moveTo(-2,-3),a.lineTo(-2,3),a.moveTo(2,-3),a.lineTo(2,3),a.stroke()):(a.fillStyle="#fff",a.beginPath(),a.moveTo(-3,-3),a.lineTo(3.5,0),a.lineTo(-3,3),a.closePath(),a.fill())},fnClick:function(a){sc()}});a({id:"video_progress",name:"video",fnVisible:function(){return n&&K()},fnPaint:function(a){var b;b=K()&&c.video.duration?c.video.currentTime/c.video.duration:0;a.fillStyle="rgba(196, 196, 255, 0.6)";a.fillRect(-f.CTRL_CX/
2*3,-9,3*f.CTRL_CX*b,18);if(K()){b=c.video.currentTime;var d=c.video.duration;b=isNaN(b)||isNaN(d)?"":jb(Math.floor(b/60),2)+":"+jb(Math.floor(b%60),2)+" / "+jb(Math.floor(d/60),2)+":"+jb(Math.floor(d%60),2)}else b="";a.font="12px "+f.FONTFAMILY_DEF;a.textAlign="center";a.textBaseline="alphabetic";a.fillStyle="rgba(255,255,255,1)";a.fillText(b,0,4)},fnClick:function(a){a=(ib?a.layerX:a.offsetX)/a.target.clientWidth;K()&&c.video.duration&&(c.video.currentTime=c.video.duration*a,c.video.play())},xFactor:3});
a({id:"video_sound",name:"video",fnVisible:function(){return n&&K()},fnPaint:function(a){a.beginPath();a.moveTo(-7,2);a.lineTo(-4,2);a.lineTo(0,5);a.lineTo(0,-5);a.lineTo(-4,-2);a.lineTo(-7,-2);a.closePath();a.stroke();a.lineWidth=1.2;a.beginPath();a.arc(0,0,4,-.9,.9);a.stroke();a.beginPath();a.arc(0,0,7.5,-.9,.9);a.stroke();tc()&&(a.lineWidth=1.5,a.moveTo(-8,7),a.lineTo(8,-7),a.moveTo(8,7),a.lineTo(-8,-7));a.stroke()},fnClick:function(a){K()&&(c.video.muted=!c.video.muted)}});a({id:"scale_zoomout",
name:"scale",fnVisible:function(){return v},fnPaint:function(a){a.beginPath();a.moveTo(-4,0);a.lineTo(4,0);a.stroke()},fnClick:function(a){Ka(1/f.ZOOM_STEP1)},fnEnabled:function(){return p>Ua&&p>La}});a({id:"scale_1",name:"scale",fnVisible:function(){return v},fnPaint:function(a){a.beginPath();a.moveTo(-4,-1);a.lineTo(0,-4);a.lineTo(0,6);a.stroke()},fnClick:function(a){ba(1)},fnHilight:function(){return 1==p}});a({id:"scale_fit",name:"scale",fnVisible:function(){return v},fnPaint:function(a){a.beginPath();
a.strokeRect(-4,-4,8,8)},fnClick:function(a){ba(-1)},fnHilight:function(){return p==La}});a({id:"scale_zoomin",name:"scale",fnVisible:function(){return v},fnPaint:function(a){a.beginPath();a.moveTo(-4,0);a.lineTo(4,0);a.moveTo(0,-4);a.lineTo(0,4);a.stroke()},fnClick:function(a){Ka(f.ZOOM_STEP1)},fnEnabled:function(){return p<wb}});a({id:"motion_left",name:"motion",fnVisible:function(){return w},fnPaint:function(a){a.beginPath();a.moveTo(3,-3);a.lineTo(-3,0);a.lineTo(3,3);a.stroke()},fnClick:function(a){O(u-
2,null)}});a({id:"motion_stop",name:"motion",fnVisible:function(){return w},fnPaint:function(a){a.beginPath();a.moveTo(-3,-4);a.lineTo(-3,4);a.moveTo(3,-4);a.lineTo(3,4);a.stroke()},fnClick:function(a){O(0,0)},fnEnabled:function(){return 0!=u||0!=y}});a({id:"motion_right",name:"motion",fnVisible:function(){return w},fnPaint:function(a){a.beginPath();a.moveTo(-3,-3);a.lineTo(3,0);a.lineTo(-3,3);a.stroke()},fnClick:function(a){O(u+2,null)}});a({id:"browse_prev",name:"browse",fnVisible:function(){return C&&
ea&&1<ea.length},fnPaint:function(a){a.beginPath();a.moveTo(-3,-3);a.lineTo(-9,0);a.lineTo(-3,3);a.stroke();a.strokeRect(1,-4,8,8)},fnClick:function(a){Tb(-1)},fnEnabled:function(){return 0<fa}});a({id:"browse_next",name:"browse",fnVisible:function(){return C&&ea&&1<ea.length},fnPaint:function(a){a.beginPath();a.moveTo(3,-3);a.lineTo(9,0);a.lineTo(3,3);a.stroke();a.strokeRect(-9,-4,8,8)},fnClick:function(a){Tb(1)},fnEnabled:function(){return fa<ea.length-1}});a({id:"hotspots",name:"misc",fnVisible:function(){return D&&
(Y&&Y.length||Z&&Z.length)},fnPaint:function(a){a.beginPath();a.moveTo(-7,-4.5);a.lineTo(7,-4.5);a.lineTo(7,2.5);a.lineTo(2.5,2.5);a.lineTo(-1,6);a.lineTo(-1.5,6);a.lineTo(-1.5,2.5);a.lineTo(-7,2.5);a.closePath();a.stroke()},fnClick:function(a){pa=!pa;(Ea=!Ea)||Ja(!0);t()},fnHilight:function(){return pa||Ea}});a({id:"orientation",name:"misc",fnVisible:function(){return B&&G},fnPaint:function(a){a.lineWidth=1.8;a.beginPath();a.arc(0,0,7,0,2*Math.PI,!0);a.stroke();a.fillStyle="#fff";a.beginPath();a.moveTo(2,
2);a.lineTo(-5,5);a.lineTo(-2,-2);a.lineTo(5,-5);a.closePath();a.arc(0,0,1,0,2*Math.PI,!0);a.fill()},fnClick:function(a){G&&(R(),G.usrMode="absolute"==G.usrMode?"none":"absolute",t())},fnHilight:function(){return"absolute"==G.usrMode}});a({id:"fullwindow",name:"misc",fnVisible:function(){return q&&lb},fnPaint:function(a){a.beginPath();a.moveTo(-8,2);a.lineTo(-8,6);a.lineTo(-5,6);a.moveTo(8,2);a.lineTo(8,6);a.lineTo(5,6);a.moveTo(-8,-2);a.lineTo(-8,-6);a.lineTo(-5,-6);a.moveTo(8,-2);a.lineTo(8,-6);
a.lineTo(5,-6);a.stroke()},fnClick:function(a){Jb(!Oa)},fnHilight:function(){return Oa}});a({id:"help",name:"misc",fnVisible:function(){return A},fnPaint:function(a){a.fillStyle=a.strokeStyle;a.font="bold 16px "+f.FONTFAMILY_DEF;a.textAlign="center";a.textBaseline="alphabetic";a.fillText("?",0,6)},fnClick:function(a){R();"javascript:"==A.substr(0,11).toLowerCase()?eval(A.substr(11)):(z=self.open(A,"ViewerHelp","width=500,height=600,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,toolbar=no,titlebar=yes"))&&
z.focus()}});a({id:"info",name:"misc",fnVisible:function(){return E},fnPaint:function(a){a.beginPath();a.moveTo(-3,-1);a.lineTo(0,-1);a.lineTo(0,5);a.moveTo(-4,5);a.lineTo(4,5);a.stroke();a.fillStyle="#fff";a.beginPath();a.arc(-.5,-5,1.8,0,2*Math.PI,!0);a.fill()},fnClick:function(a){ob()}});a({id:"closewindow",name:"misc",fnVisible:function(){return F&&self.opener&&!e.canvas.placeholder},fnPaint:function(a){a.beginPath();a.moveTo(0,-7);a.lineTo(0,3);a.stroke();a.beginPath();a.arc(0,1,5,225*Math.PI/
180,315*Math.PI/180,!0);a.stroke()},fnClick:function(a){z&&!z.closed&&(z.close(),z=null);window.close()}})})()}function Pc(){function a(a){R();d=a;window.removeEventListener("deviceorientation",Jc,!1);window.removeEventListener("compassneedscalibration",Kc,!1);switch(a){case f.ORIENTATION_ABSOLUTE:window.addEventListener("compassneedscalibration",Kc,!1);case f.ORIENTATION_RELATIVE:case f.ORIENTATION_RELATIVE_INV:window.addEventListener("deviceorientation",Jc,!1)}}function b(){switch(d){case f.ORIENTATION_ABSOLUTE:return"absolute";
case f.ORIENTATION_RELATIVE:return"relative";case f.ORIENTATION_RELATIVE_INV:return"relative-inv";default:return"none"}}function c(a,b,d){this.pan=a;this.tilt=b;this.timestamp=d}Object.defineProperty(this,"mode",{set:function(b){a(b)},get:function(){return d}});Object.defineProperty(this,"usrMode",{set:function(b){switch(b){case "absolute":a(f.ORIENTATION_ABSOLUTE);break;case "relative":a(f.ORIENTATION_RELATIVE);break;case "relative-inv":a(f.ORIENTATION_RELATIVE_INV);break;default:a(f.ORIENTATION_NONE)}},
get:function(){return b()}});this.setListeners=function(){a(d)};this.newEvent=function(a){var b=0;if(void 0!=window.orientation)b=window.orientation;else if(void 0!=screen.mozOrientation)switch(screen.mozOrientation){case "landscape-primary":b=90;break;case "portrait-primary":b=0;break;case "landscape-secondary":b=-90;break;case "portrait-secondary":b=180}var h=0,k=0;switch(d){case f.ORIENTATION_ABSOLUTE:switch(b){case 90:h=3600-a.alpha+90;90<Math.abs(a.beta)&&(h+=180);break;case 0:h=3600-a.alpha-
a.gamma;break;case -90:h=3600-a.alpha-90;90<Math.abs(a.beta)&&(h+=180);break;case 180:h=3600-a.alpha+a.gamma+180}h%=360;break;case f.ORIENTATION_RELATIVE:case f.ORIENTATION_RELATIVE_INV:switch(b){case 90:h=-a.beta;break;case 0:h=-a.gamma;break;case -90:h=a.beta;break;case 180:h=a.gamma}}switch(b){case 90:k=-a.gamma-90;90<Math.abs(a.beta)&&(k=0<a.gamma?k+180:90);break;case 0:k=a.beta-90;-90>a.beta&&(k=90);break;case -90:k=a.gamma-90;90<Math.abs(a.beta)&&(k=0>=a.gamma?k+180:90);break;case 180:k=-a.beta-
90,90<a.beta&&(k=90)}switch(d){case f.ORIENTATION_ABSOLUTE:b=Date.now();for(a=ib?500:100;0<e.length&&(20<=e.length||e[0].timestamp<=b-a);)e.shift();e.push(new c(h,k,b));this.pan=this.tilt=0;for(var b=e[e.length-1],k=b.timestamp,b=b.pan,n=0,p=0,t=0,u=e.length-1;0<=u;u--){var q=e[u],v=(a-(k-q.timestamp))/a;if(0>=v)break;var t=t+v,w=q.pan;-180>w-b?w+=360:180<w-b&&(w-=360);h+=360;h%=360;n+=w*v;p+=q.tilt*v}t&&(this.pan=n/t,this.tilt=p/t);break;case f.ORIENTATION_RELATIVE:case f.ORIENTATION_RELATIVE_INV:this.pan=
h,this.tilt=k}};var d=f.ORIENTATION_NONE,e=[];this.tilt=this.pan=0}function ga(a){return a?Math.cos(a*f.DEG_TO_RAD):1}function wa(a){return Math.sin(a*f.DEG_TO_RAD)}function Ca(a){return Math.tan(a*f.DEG_TO_RAD)}function Va(a,b){return Math.atan2(a,b)*f.RAD_TO_DEG}function na(a,b){return Math.sqrt(a*a+b*b)}function dc(a){a["user-select"]="none";a["-webkit-user-select"]="none";a["-ms-user-select"]="none";a["-moz-user-select"]="none";a["touch-action"]="none";a["-ms-touch-action"]="none";a["content-zooming"]=
"none";a["-ms-content-zooming"]="none"}function Mc(a){a.addEventListener("wheel",function(a){try{var c=new WheelEvent("wheel",{deltaY:a.deltaY,bubbles:!1,cancelable:!0});e.canvas.dispatchEvent(c)}catch(d){}},!0);a.setAttribute("tabindex",0);a.onfocus=function(a){e.canvas.focus()};a.oncontextmenu=function(a){N(a)};a.ondragstart=function(a){N(a)}}function ka(a,b,c){return a<=b?b:a>=c?c:a}function fb(a,b){this.x=a;this.y=b}function Db(a,b,c,d){this.x=a;this.y=b;this.cx=c;this.cy=d}function kd(a,b){this.pan=
a;this.tilt=b;this.yDisp=this.xDisp=0;this.valid=!1}function nd(a,b,c,d,e){this.xSrc=a;this.ySrc=b;this.x=c;this.y=d;this.z=e}function Lc(a,b){for(var c=[],d=0,e=0,f,h,k;;){f=0;h=d;for(k=e;!(f+=a[h++]*b[k],k+=4,16<=k););c.push(f);e++;if(4==e){d+=4;if(16==d)break;e=0}}return c}var f={DEBUG:!1,VERSION:"2.4.1.34",HOMEPAGE:"http://www.panorado.com",HTTPSPAGE:"https://ssl-account.com/www.panorado.com",COPYRIGHT:"(c) 2012-2016 by Karl Maloszek - Simple Software",CHECKLICENSE:!0,REQUESTANIMATIONFRAME:!1,
DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,PRJ_FLAT:1,PRJ_SPHERICAL:2,ITYPE_IMAGEFILE:0,ITYPE_CUBEFILE:1,ITYPE_VIDEOFILE:2,ITYPE_LIVESTREAM:3,PANSPEED_DEF:3,SPEED_DIFF:3,SPEED_MAX:45,SCALE_DEF:1,SCALE_MIN:.125,SCALE_MAX:8,ZOOM_STEP1:Math.SQRT2,ZOOM_STEP2:Math.sqrt(Math.sqrt(Math.sqrt(Math.SQRT2))),HORZ_FOV_MAX:120,VERT_FOV_MAX:81.8,MOUSE_SPEED:.04,GRIDSIZE_MIN:1,GRIDSIZE_MAX:8,GRIDSIZE_DEF:5,HS_DEFSIZE:80,HS_FONTSIZE:8,OV_DEFSIZE:80,OV_SCALE_FIXED:0,OV_SCALE_LOGARITHMIC:1,OV_SCALE_LINEAR:2,FONTFAMILY_DEF:"Arial,sans-serif",
CTRL_CX:32,CTRL_CY:20,STATUS_NOIMAGE:0,STATUS_LOADING:1,STATUS_LOADED:2,STATUS_ERROR_IMG:3,STATUS_ERROR_WEBGL:4,STATUS_ERROR_LICENSE:5,ORIENTATION_NONE:0,ORIENTATION_ABSOLUTE:1,ORIENTATION_RELATIVE:2,ORIENTATION_RELATIVE_INV:3,LOGO_URL:"data:image/png;base64,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"},
Nc=!1;try{Object.defineProperty(this,"initialized",{get:function(){return Nc}})}catch(a){alert("PanoradoJS requires a browser with ECMAScript 5 support!\nHint: Do not use compatibility mode in MSIE!");return}this.about=ob;this.reset=Pb;this.move=eb;this.moveTo=vc;this.zoom=Ka;this.zoomToCursor=function(a){W=0;R();ua=!0;ba(p*a)};this.setSpeed=O;this.resize=kc;this.selectImage=Rb;this.nextImage=Tb;this.setImage=function(a){fa=-1;Sb(a)};var Xc=window.requestAnimationFrame||window.webkitRequestAnimationFrame||
function(a){window.setTimeout(a,1)},Pa=navigator.userAgent,Oc=navigator.platform,yb=0<=Pa.indexOf("Trident/"),zc=0<=Pa.indexOf("Edge/"),ld=0<=Pa.indexOf("Chrome/")&&0>Pa.indexOf("OPR/"),ib=0<=Pa.indexOf("Firefox/"),md=0<=Pa.indexOf("OPR/");Oc.indexOf("Win32");Pa.indexOf("Android");Oc.indexOf("iPhone");var Ha="";Object.defineProperty(this,"licenseKey",{set:function(a){Ha=a;t()},get:function(){return Ha}});var Ac=new Image;Ac.src=f.LOGO_URL;var Vb=640;Object.defineProperty(this,"minLivestreamWidth",
{set:function(a){Vb=a},get:function(){return Vb}});Object.defineProperty(this,"version",{get:function(){return f.VERSION}});Object.defineProperty(this,"info",{get:function(){return nc()}});if("object"!=typeof J)alert("PanoradoJS object constructor requires a Canvas parameter!");else{Object.defineProperty(this,"canvas",{get:function(){return e.canvas}});var h=window.devicePixelRatio;h||(h=1);var Oa=!1;Object.defineProperty(this,"fullWindow",{set:function(a){Jb(a)},get:function(){return Oa}});var lb=
!0;Object.defineProperty(this,"fullWindowEnabled",{set:function(a){lb=a?!0:!1},get:function(){return lb}});var ea=null;Object.defineProperty(this,"imageList",{set:function(a){ea=a;fa=-1;Q.paint(!0)},get:function(){return ea}});var fa=-1;Object.defineProperty(this,"currentImageId",{set:function(a){Rb(a)},get:function(){return fa}});var c=null;Object.defineProperty(this,"image",{set:function(a){fa=-1;Sb(a)},get:function(){return c}});var H=null,Wb=!1,vb=!1,M=f.PRJ_FLAT;Object.defineProperty(this,"projection",
{set:function(a){M="spherical"==a?f.PRJ_SPHERICAL:f.PRJ_FLAT;ub();t()},get:function(){return M==f.PRJ_SPHERICAL?"spherical":"flat"}});var qd=pc();Object.defineProperty(this,"isWebGlAvailable",{get:function(){return qd}});Object.defineProperty(this,"useWebGl",{set:function(a){pb()&&(a=!0);a?k||(k=new gc,k.canvas&&k.ctx?ub():k=null):k&&(k.clearBuffers(),k.canvas.parentNode&&k.canvas.parentNode.removeChild(k.canvas),k=null);kb();t()},get:function(){return k?!0:!1}});var Lb=f.GRIDSIZE_DEF;Object.defineProperty(this,
"gridSize",{set:function(a){Lb=ka(a,f.GRIDSIZE_MIN,f.GRIDSIZE_MAX);ub();t()},get:function(){return Lb}});var qa=!0;Object.defineProperty(this,"enabled",{set:function(a){qa=a?!0:!1;t()},get:function(){return qa}});var La=f.SCALE_MIN,Yb=f.SCALE_MIN,Ua=f.SCALE_MIN,Zb=f.SCALE_MIN;Object.defineProperty(this,"minScale",{set:function(a){Zb=ka(a,f.SCALE_MIN,f.SCALE_MAX);qb();ba(p)},get:function(){return Zb}});var wb=f.SCALE_MAX,$b=f.SCALE_MAX;Object.defineProperty(this,"maxScale",{set:function(a){$b=ka(a,
f.SCALE_MIN,f.SCALE_MAX);qb();ba(p)},get:function(){return $b}});var ra=!1;if(void 0!==document.ontouchstart)try{document.createEvent("TouchEvent"),ra=!0}catch(a){}var sa=!1;if(navigator.msMaxTouchPoints||navigator.maxTouchPoints)try{document.createEvent("MsPointerEvent"),sa=!0}catch(a){}Object.defineProperty(this,"isTouchAvailable",{get:function(){return ra||sa}});var ha=ra||sa;Object.defineProperty(this,"useTouch",{set:function(a){Dc(a)},get:function(){return ha}});var G=null;try{document.createEvent("DeviceOrientationEvent"),
window.addEventListener("deviceorientation",ab,!1),setTimeout(function(){window.removeEventListener("deviceorientation",ab,!1)},2E3)}catch(a){}Object.defineProperty(this,"isOrientationAvailable",{get:function(){return G?!0:!1}});Object.defineProperty(this,"orientationMode",{set:function(a){G&&(R(),G.usrMode=a)},get:function(){return G?G.usrMode:"none"}});var Da=ra||sa;Object.defineProperty(this,"mouseMode",{set:function(a){Da="grab"==a;la()},get:function(){return Da?"grab":"pan"}});var jc=!1,ic=!1;
Object.defineProperty(this,"mouseWheel",{set:function(a){jc="in"==a;ic="ignore"==a},get:function(){return ic?"ignore":jc?"in":"out"}});var Ib="",Hb="",Gb="",Fb="";Object.defineProperty(this,"panCursor0",{set:function(a){Fa(a);Ib=a;la()},get:function(){return Ib}});Object.defineProperty(this,"panCursor1",{set:function(a){Fa(a);Hb=a;la()},get:function(){return Hb}});Object.defineProperty(this,"grabCursor0",{set:function(a){Fa(a);Gb=a;la()},get:function(){return Gb}});Object.defineProperty(this,"grabCursor1",
{set:function(a){Fa(a);Fb=a;la()},get:function(){return Fb}});var Ab=2;Object.defineProperty(this,"softPan",{set:function(a){Ab=ka(a,0,5)},get:function(){return Ab}});var Ba=3;Object.defineProperty(this,"softZoom",{set:function(a){Ba=ka(a,0,5)},get:function(){return Ba}});var ac=.5;Object.defineProperty(this,"softFade",{set:function(a){ac=ka(a,0,10)},get:function(){return ac}});var F=f.STATUS_NOIMAGE;Object.defineProperty(this,"loaded",{get:function(){return A()}});var uc=!0,v=0;Object.defineProperty(this,
"pan",{set:function(a){A()&&(R(),v=Sa(a),t())},get:function(){return A()?v:0}});var w=0;Object.defineProperty(this,"tilt",{set:function(a){A()&&(R(),w=Ta(a),t())},get:function(){return A()?w:0}});var p=1,ua=!1;Object.defineProperty(this,"scale",{set:function(a){ua=!1;ba(a)},get:function(){return p}});Object.defineProperty(this,"dispHorzFov",{get:function(){return A()?xc():0}});Object.defineProperty(this,"dispVertFov",{get:function(){return A()?yc():0}});Object.defineProperty(this,"panSpeed",{set:function(a){O(a,
null)},get:function(){return A()?u:0}});Object.defineProperty(this,"tiltSpeed",{set:function(a){O(null,a)},get:function(){return A()?y:0}});Object.defineProperty(this,"mousePan",{get:function(){return A()?Ma(p,void 0,void 0,void 0,void 0).x:0}});Object.defineProperty(this,"mouseTilt",{get:function(){return A()?Ma(p,void 0,void 0,void 0,void 0).y:0}});Object.defineProperty(this,"videoPlaying",{set:function(a){a?K()&&c.video.play():K()&&c.video.pause()},get:function(){return Ob()}});Object.defineProperty(this,
"videoSound",{set:function(a){K()&&(c.video.muted=!a)},get:function(){return tc()}});Object.defineProperty(this,"videoDuration",{get:function(){var a;a=K()&&c.video.duration?c.video.duration:0;return a}});Object.defineProperty(this,"videoCurrentTime",{set:function(a){K()&&(0>a?a=0:a>c.video.duration&&(a=c.video.duration),c.video.currentTime=a,c.video.play())},get:function(){var a;a=K()&&c.video.currentTime?c.video.currentTime:0;return a}});var Ia=0,L=0,W=0,S=0,u=0,y=0,ta=0,ja=0,cb=0,da=0,xa=0,Hc=
0,Ic=0,Ra=null,mb=null,nb=null,Kb=null,zb=null;Object.defineProperty(this,"onImageLoaded",{set:function(a){Ra=a},get:function(){return Ra}});Object.defineProperty(this,"onClick",{set:function(a){mb=a},get:function(){return mb}});Object.defineProperty(this,"onDblClick",{set:function(a){nb=a},get:function(){return nb}});Object.defineProperty(this,"onMouseMove",{set:function(a){Kb=a},get:function(){return Kb}});Object.defineProperty(this,"onImageMove",{set:function(a){zb=a},get:function(){return zb}});
var n=new od,Qa=!1;Object.defineProperty(this,"compassVisible",{set:function(a){Qa=a;t()},get:function(){return Qa}});var pa=!0;Object.defineProperty(this,"hotspotsVisible",{set:function(a){pa=a;t()},get:function(){return pa}});var E={imgInfo:Wa(!1),imgLink:Wa(!0),border:!1,shadow:!1,opacity:1};Object.defineProperty(this,"hotspotTemplate",{set:function(a){ad(a)}});var Y=null,za=null,e=new jd(J),Ea=!0;Object.defineProperty(this,"overlaysVisible",{set:function(a){(Ea=a)||Ja(!0);t()},get:function(){return Ea}});
var B={symbol:ec(),symbolScaling:f.OV_SCALE_LOGARITHMIC,symbolPerspective:!1,popupScaling:f.OV_SCALE_LOGARITHMIC,popupPerspective:!1,popupCenter:!1,popupClose:!1};Object.defineProperty(this,"overlayTemplate",{set:function(a){cd(a)}});var Z=null,aa=null,V=bd(),mc=ed(),$a=dd(),k=new gc;k.canvas&&k.ctx||(k=null);Dc(ha);
var Q=new pd;this.controls=Q;Fa(Ib);Fa(Hb);Fa(Gb);Fa(Fb);kb();t();


f.CHECKLICENSE&&setTimeout(function(){try{
	var a=new Image;
/*
a.onload=function(a){
	F=f.STATUS_ERROR_LICENSE;t()
	};
	*/
a.onerror=
//function(a){};
//var b="http:"!=location.protocol,c=(b?f.HTTPSPAGE:f.HOMEPAGE)+"/pjscheck.php?ts="+Date.now();
//Ha&&(c+="&key="+Ha);

b&&(c+="&referer="+location.href);a.src=c}

catch(d){}},1E4);

var oc="?",Ga=new XMLHttpRequest;Ga.onreadystatechange=function(){4!=Ga.readyState||200!=Ga.status&&204!=Ga.status&&304!=Ga.status||(oc=Ga.responseText.replace(/\s/g,""))};

var rd=("http:"!=location.protocol?f.HTTPSPAGE:f.HOMEPAGE)+"/Download/PanoradoJsVersion.txt?ts="+Date.now();Ga.open("GET",rd,!0);Ga.send(null);Nc=!0}}

function _placeholderExtract(J,ab){J&&ab&&(J.placeholder=document.createElement("placeholder"),J.parentNode.replaceChild(J.placeholder,J),ab.appendChild(J))}function _placeholderRestore(J){J&&J.placeholder&&(J.placeholder.parentNode.replaceChild(J,J.placeholder),delete J.placeholder

)};
